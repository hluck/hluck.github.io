<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hluck.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Jetpack Compose中文文档 ​        在Compose中，每个组件都是一个带有@Composable注解的函数，被称为Composable。Compose已经预置了很多基础的Composable组件，它们都是基于Material Design规范设计，例如Button、TextField、TopAppBar等。 ​        在布局方面，Compose提供了Column、R">
<meta property="og:type" content="article">
<meta property="og:title" content="常用UI组件">
<meta property="og:url" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/index.html">
<meta property="og:site_name" content="余一">
<meta property="og:description" content="Jetpack Compose中文文档 ​        在Compose中，每个组件都是一个带有@Composable注解的函数，被称为Composable。Compose已经预置了很多基础的Composable组件，它们都是基于Material Design规范设计，例如Button、TextField、TopAppBar等。 ​        在布局方面，Compose提供了Column、R">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/1.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/2.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/3.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/4.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/5.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/6.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/7.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/8.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/9.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/10.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/11.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/12.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/13.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/14.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/15.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/16.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/17.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/18.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/19.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/20.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/21.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/22.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/23.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/24.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/25.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/26.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/27.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/28.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/29.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/30.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/31.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/32.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/33.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/34.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/35.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/36.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/38.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/39.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/40.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/41.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/42.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/43.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/44.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/45.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/46.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/47.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/48.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/49.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/50.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/51.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/52.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/53.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/54.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/55.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/56.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/57.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/58.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/59.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/60.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/61.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/62.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/63.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/64.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/65.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/66.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/67.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/68.png">
<meta property="og:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/69.png">
<meta property="article:published_time" content="2022-12-29T01:23:19.750Z">
<meta property="article:modified_time" content="2023-01-05T16:16:56.622Z">
<meta property="article:author" content="余一">
<meta property="article:tag" content="Compose">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/1.png">

<link rel="canonical" href="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>常用UI组件 | 余一</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="余一" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">余一</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">纸上得来终觉浅，绝知此事要躬行。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hluck.github.io/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar5.jpg">
      <meta itemprop="name" content="余一">
      <meta itemprop="description" content="纸上得来终觉浅，绝知此事要躬行。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余一">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          常用UI组件
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-12-29 09:23:19" itemprop="dateCreated datePublished" datetime="2022-12-29T09:23:19+08:00">2022-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-01-06 00:16:56" itemprop="dateModified" datetime="2023-01-06T00:16:56+08:00">2023-01-06</time>
              </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>43k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>39 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><a href="https://jetpackcompose.cn/docs/" target="_blank" rel="noopener">Jetpack Compose中文文档</a></p>
<p>​        在Compose中，每个组件都是一个带有@Composable注解的函数，被称为Composable。Compose已经预置了很多基础的Composable组件，它们都是基于Material Design规范设计，例如Button、TextField、TopAppBar等。</p>
<p>​        在布局方面，Compose提供了Column、Row、Box三种布局组件，类似于传统视图开发中的LinearLayout(Vertical)、LinearLayout(Horizontal)、ReleativeLayout</p>
<h2 id="Modifier修饰符"><a href="#Modifier修饰符" class="headerlink" title="Modifier修饰符"></a>Modifier修饰符</h2><p>​        在传统开发中，使用XML文件来描述组件的样式，而Jetpack Compose设计了一个精妙的东西，它叫作Modifier。</p>
<p>​        Modifier允许我们通过链式调用的写法来为组件应用一系列的样式设置，如边距、字体、位移等。在Compose中，<strong>每个基础的Composable组件都有一个modifier参数，通过传入自定义的Modifier来修改组件的样式。</strong></p>
<h3 id="常用修饰符"><a href="#常用修饰符" class="headerlink" title="常用修饰符"></a>常用修饰符</h3><p>​        对于所有Composable组件都通用。</p>
<h4 id="1-Modifier-size"><a href="#1-Modifier-size" class="headerlink" title="1.Modifier.size"></a>1.Modifier.size</h4><p>用来设置被<strong>修饰组件的大小</strong></p>
<a id="more"></a>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">View1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Row&#123;</span><br><span class="line">        Image(</span><br><span class="line">            painterResource(id = R.drawable.e),</span><br><span class="line">            contentDescription = <span class="literal">null</span>,</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">60</span>.dp) <span class="comment">//with与height同时设置为60dp</span></span><br><span class="line">                .clip(CircleShape) <span class="comment">//将图片裁剪为圆形</span></span><br><span class="line">        )</span><br><span class="line">        Spacer(modifier = Modifier.width(<span class="number">10</span>.dp))</span><br><span class="line">        Image(</span><br><span class="line">            painterResource(id = R.drawable.e),</span><br><span class="line">            contentDescription = stringResource(id = androidx.compose.ui.R.string.on),</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(width = <span class="number">100</span>.dp, height = <span class="number">100</span>.dp) <span class="comment">//with与height同时设置为100dp</span></span><br><span class="line">                .clip(CircleShape) <span class="comment">//将图片裁剪为圆形</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Modifier-background"><a href="#2-Modifier-background" class="headerlink" title="2.Modifier.background"></a>2.Modifier.background</h4><p>​        <strong>用来为被修饰组件添加背景色</strong>。背景色支持设置color的<strong>纯色</strong>背景，也可以使用brush设置<strong>渐变色</strong>背景。Brush是Compose提供的用来创建线性渐变色的工具。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">View2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Row&#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">50</span>.dp)</span><br><span class="line">                .background(Color.Red) <span class="comment">//设置纯色背景</span></span><br><span class="line">        )&#123;</span><br><span class="line">            Text(text = <span class="string">"纯色"</span>,Modifier.align(Alignment.Center))</span><br><span class="line">        &#125;</span><br><span class="line">        Spacer(modifier = Modifier.width(<span class="number">10</span>.dp))</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">50</span>.dp)</span><br><span class="line">                .background(brush = verticalGradientBrush) <span class="comment">//设置渐变色背景</span></span><br><span class="line">        )&#123;</span><br><span class="line">            Text(text = <span class="string">"渐变色"</span>,Modifier.align(Alignment.Center))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Brush渐变色</span></span><br><span class="line"><span class="keyword">val</span> verticalGradientBrush = Brush.verticalGradient(</span><br><span class="line">    colors = listOf(</span><br><span class="line">        Color.Red,</span><br><span class="line">        Color.Yellow,</span><br><span class="line">        Color.White,</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>​        传统视图中View的background属性可以用来设置图片格式的背景，Compose的background修饰符只能设置颜色背景，图片背景需要使用Box布局配合Image组件实现。</p>
<h4 id="3-Modifier-fillMaxSize"><a href="#3-Modifier-fillMaxSize" class="headerlink" title="3.Modifier.fillMaxSize"></a>3.Modifier.fillMaxSize</h4><p>有的时候想要让组件在高度或者宽度上<strong>填满父空间</strong>，此时可以使用fillMaxXXX系列方法：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//填满整个父空间</span></span><br><span class="line">Box(Modifier.fillMaxSize().background(Color.Red))</span><br><span class="line"><span class="comment">//高度填满父空间</span></span><br><span class="line">Box(Modifier.fillMaxHeight().width(<span class="number">60</span>.dp).background(Color.Red))</span><br><span class="line"><span class="comment">//宽度填满父空间</span></span><br><span class="line">Box(Modifier.fillMaxWidth()height(<span class="number">60</span>.dp).background(Color.Red))</span><br></pre></td></tr></table></figure>

<h4 id="4-Modifier-border-amp-Modifier-padding"><a href="#4-Modifier-border-amp-Modifier-padding" class="headerlink" title="4.Modifier.border &amp; Modifier.padding"></a>4.Modifier.border &amp; Modifier.padding</h4><p>​        border用来为被修饰组件添加边框。边框可以指定颜色、粗细，以及通过Shape指定形状，比如圆角矩形等。padding用来为被修饰组件增加间隙。可以在border前后各插入一个padding，区分对外和对内的间距</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">View3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Box(modifier = Modifier</span><br><span class="line">        .padding(<span class="number">8</span>.dp) <span class="comment">//外间隙</span></span><br><span class="line">        .border(<span class="number">2</span>.dp, Color.Red, shape = RoundedCornerShape(<span class="number">2</span>.dp))<span class="comment">//边框</span></span><br><span class="line">        .padding(<span class="number">8</span>.dp) <span class="comment">//内间隙</span></span><br><span class="line">    )&#123;</span><br><span class="line">        Spacer(modifier = Modifier</span><br><span class="line">            .size(width = <span class="number">100</span>.dp, height = <span class="number">10</span>.dp)</span><br><span class="line">            .background(Color.Red)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/1.png" alt></p>
<p>​        <strong>相对于传统布局有Margin和Padding之分，Compose中只有padding这一种修饰符，根据在调用链中的位置不同发挥不同作用</strong>，概念更加简洁，这也体现了Modifier中链式调用的特点。</p>
<h4 id="5-Modifier-offset"><a href="#5-Modifier-offset" class="headerlink" title="5.Modifier.offset"></a>5.Modifier.offset</h4><p>​        offset修饰符用来<strong>移动被修饰组件的位置</strong>，我们在使用时只分别传入水平方向与垂直方向的偏移量即可。</p>
<p>​        Modifier调用顺序会影响最终UI呈现的效果。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Box(modifier = Modifier</span><br><span class="line">    .size(<span class="number">80</span>.dp)</span><br><span class="line">    .offset(x = <span class="number">20</span>.dp, y = <span class="number">20</span>.dp)</span><br><span class="line">    .background(Color.Red)</span><br><span class="line">)&#123;</span><br><span class="line">    Text(text = <span class="string">"哈哈哈"</span>,Modifier.size(<span class="number">60</span>.dp))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可以使用offset的重载方法，返回一个IntOffset实例:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Box(modifier = Modifier</span><br><span class="line">    .size(<span class="number">80</span>.dp)</span><br><span class="line">    .offset &#123; IntOffset(<span class="number">20</span>.dp.roundToPx(),<span class="number">15</span>.dp.roundToPx()) &#125;</span><br><span class="line">    .background(Color.Red)</span><br><span class="line">)&#123;</span><br><span class="line">    Text(text = <span class="string">"哈哈哈"</span>,Modifier.size(<span class="number">60</span>.dp))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/2.png" alt></p>
<h3 id="作用域限定Modifier修饰符"><a href="#作用域限定Modifier修饰符" class="headerlink" title="作用域限定Modifier修饰符"></a>作用域限定Modifier修饰符</h3><p>​        Compose充分发挥了Kotlin的语法特性，让某些Modifier修饰符只能在特定作用域中使用，有利于类型安全地调用它们。所谓的“作用域”，在Kotlin中就是一个带有Receiver的代码块。例如Box组件参数中的conent就是一个Reciever类型为BoxScope的代码块，因此其子组件都处于BoxScope作用域中。</p>
<p>​        Receiver跨级访问会成为写代码时的“噪声”，加大出错的概率。Compose考虑到了这个问题，可以通过@LayoutScopeMarker注解来规避Receiver的跨级访问。常用组件Receivier作用域类型均已使用@LayoutScopeMarker注解进行了声明。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/3.png" alt></p>
<p>​        <strong>Compose作用域限定实现了Modifier的安全调用，我们只能在特定作用域中调用修饰符，</strong>就像只能在FrameLayout内使用toRightOf一样，如果换作LinearLayout将无法设置toRightOf</p>
<p>常见的作用域限定Modifier修饰符。</p>
<h4 id="1-matchParentSize"><a href="#1-matchParentSize" class="headerlink" title="1.matchParentSize"></a>1.matchParentSize</h4><p>​        <strong>matchParentSize是只能在BoxScope中使用的作用域限定修饰符。当使用matchParentSize设置尺寸时，可以保证当前组件的尺寸与父组件相同</strong>。而父组件默认的是wrapContent，会根据UserInfo的尺寸确定自身的尺寸。</p>
<p>​        如果使用fillMaxSize取代matchParentSize，那么该组件的尺寸会被设置为父组件所允许的最大尺寸，这样会导致背景铺满整个屏幕。</p>
<h4 id="2-weight"><a href="#2-weight" class="headerlink" title="2.weight"></a>2.weight</h4><p>​        <strong>在RowScope与ColumnScope中，可以使用专属的weight修饰符来设置尺寸。</strong>与size修饰符不同的是，weight修饰符允许组件通过百分比设置尺寸，也就是允许组件可以自适应适配各种屏幕尺寸的移动终端设备。</p>
<p>例如，我们希望白色方块、蓝色方块与红色方块共享一整块Column空间，其中每种颜色方块高度各占比1/3:</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/4.png" alt></p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/5.png" alt></p>
<h3 id="Modifier实现原理"><a href="#Modifier实现原理" class="headerlink" title="Modifier实现原理"></a>Modifier实现原理</h3><p>​        Modifier会由于调用顺序不同而产生出不同的Modifier链，Compose会按照Modifier链来顺序完成页面测量布局与渲染。</p>
<h4 id="1-接口实现"><a href="#1-接口实现" class="headerlink" title="1.接口实现"></a>1.接口实现</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Modifier</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldIn</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">R</span>, <span class="type">Element</span>) -&gt; <span class="type">R</span>)</span></span>: R</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldOut</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">Element</span>, <span class="type">R</span>) -&gt; <span class="type">R</span>)</span></span>: R</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">any</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">all</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="title">then</span><span class="params">(other: <span class="type">Modifier</span>)</span></span>: Modifier =</span><br><span class="line">        <span class="keyword">if</span> (other === Modifier) <span class="keyword">this</span> <span class="keyword">else</span> CombinedModifier(<span class="keyword">this</span>, other)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Element</span> : <span class="type">Modifier &#123;</span></span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldIn</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">R</span>, <span class="type">Element</span>) -&gt; <span class="type">R</span>)</span></span>: R =</span><br><span class="line">            operation(initial, <span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldOut</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">Element</span>, <span class="type">R</span>) -&gt; <span class="type">R</span>)</span></span>: R =</span><br><span class="line">            operation(<span class="keyword">this</span>, initial)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">any</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span> = predicate(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">all</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span> = predicate(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> : Modifier &#123;</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldIn</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">R</span>, <span class="type">Element</span>) -&gt; <span class="type">R</span>)</span></span>: R = initial</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;R&gt;</span> <span class="title">foldOut</span><span class="params">(initial: <span class="type">R</span>, operation: (<span class="type">Element</span>, <span class="type">R</span>) -&gt; <span class="type">R</span>)</span></span>: R = initial</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">any</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span> = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">all</span><span class="params">(predicate: (<span class="type">Element</span>) -&gt; <span class="type">Boolean</span>)</span></span>: <span class="built_in">Boolean</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">override</span> <span class="keyword">infix</span> <span class="function"><span class="keyword">fun</span> <span class="title">then</span><span class="params">(other: <span class="type">Modifier</span>)</span></span>: Modifier = other</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span> = <span class="string">"Modifier"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        Modifier实际是一个接口。它有三个具体实现，分别是<strong>一个Modifier伴生对象，Modifier. Element以及CombinedModifier</strong>。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/6.png" alt></p>
<p>​        Modifier伴生对象是我们对Modifier修饰符进行链式调用的起点，即Modifier.xxx()中开头的那个Modifier。CombinedModifier用于连接Modifier链中的每个Modifier对象。Modifier. Element代表具体的修饰符。当我们使用Modifier.xxx()时，其内部实际上会创建一个Modifier实例。</p>
<p>​        Modifier.size()内部会创建一个SizeModifier实例，并使用then进行连接，then返回一个CombinedModifier，后者用来连接两个Modifier.Element。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/7.png" alt></p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/8.png" alt></p>
<p>​        创建的各种Modifier本质上都是一个Modifier. Element。像LayoutModifier这类直接继承自Modifier. Element的接口，暂且称它们为Base Modifier。<strong>Base Modifier</strong>种类很多：</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/9.png" alt></p>
<h4 id="2-链的构建"><a href="#2-链的构建" class="headerlink" title="2.链的构建"></a>2.链的构建</h4><p>​        Modifier.size()内部会创建一个SizeModifier实例，并使用then进行连接。then返回一个CombinedModifier，后者用来连接两个Modifier.Element。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/10.png" alt></p>
<p>​        CombinedModifier连接的两个Modifier分别存储在outer与inner中，从CombinedModifier的数据结构可以联想到，Compose对Modifier的遍历，就像剥洋葱一样从外(outer)到内(inner)一层层访问。outer与inner作为private属性不能被外部直接访问，Modifier专门提供了foldOut()与foldIn()用来遍历Modifier链.</p>
<h4 id="3-链的解析"><a href="#3-链的解析" class="headerlink" title="3.链的解析"></a>3.链的解析</h4><p>​        Compose在绘制UI时，会遍历Modifier链获取配置信息。Compose使用foldOut()与foldIn()遍历Modifier链，就像Kotlin集合的fold操作符一样，链上的所有节点被“折叠”成一个结果后，传入视图树用于渲染。</p>
<h2 id="常用的基础组件"><a href="#常用的基础组件" class="headerlink" title="常用的基础组件"></a>常用的基础组件</h2><h3 id="文字组件"><a href="#文字组件" class="headerlink" title="文字组件"></a>文字组件</h3><h4 id="1-Text文本"><a href="#1-Text文本" class="headerlink" title="1.Text文本"></a>1.Text文本</h4><p>​        Compose中，Text是遵循Material Design规范设计的上层文本组件，如果想脱离Material Design使用，也可以直接使用更底层的文本组件<strong>BasicText</strong>。</p>
<p>​        <strong>Composable组件都是函数，所有的配置来自参数传递，通过参数列表就可以了解组件的所有功能</strong></p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/11.png" alt></p>
<p>​        Text的基本功能是显示一段文字，可以为text参数中传入要显示的文字内容。Compose也提供了stringResource方法通过R资源文件获取字符串。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定字符串</span></span><br><span class="line">Text(text = <span class="string">"Hello world."</span>)</span><br><span class="line"><span class="comment">//指定文字资源</span></span><br><span class="line">Text(text = stringResource(R.string.hello_world))</span><br></pre></td></tr></table></figure>

<p>​        <strong>除了stringResource, Compose也提供了获取其他类型资源的方法，例如colorResource、integerResource、painterResource（Drawable类型资源）等</strong>。</p>
<h4 id="2-style文字样式"><a href="#2-style文字样式" class="headerlink" title="2.style文字样式"></a>2.style文字样式</h4><p>​        style参数接受一个TextStyle类型，<strong>TextStyle</strong>中包含一系列设置文字样式的字段，例如行高、间距、字体大小、字体粗细等。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Preview(</span></span><br><span class="line"><span class="meta">    showSystemUi = true</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">HelloText</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column &#123;</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello world\n"</span> + <span class="string">"Goodbye World."</span></span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello world\n"</span> + <span class="string">"Goodbye World."</span>,</span><br><span class="line">            style = TextStyle(</span><br><span class="line">                fontSize = <span class="number">25</span>.sp, <span class="comment">//字体大小</span></span><br><span class="line">                fontWeight = FontWeight.Bold, <span class="comment">//字体粗细</span></span><br><span class="line">                background = Color.Cyan,<span class="comment">//字体颜色</span></span><br><span class="line">                lineHeight = <span class="number">35</span>.sp <span class="comment">//行高</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello World"</span>,</span><br><span class="line">            style = TextStyle(</span><br><span class="line">                color = Color.Gray,</span><br><span class="line">                letterSpacing = <span class="number">4</span>.sp <span class="comment">//字间距</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello World"</span>,</span><br><span class="line">            textDecoration = TextDecoration.LineThrough <span class="comment">//删除线</span></span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello World"</span>,</span><br><span class="line">            <span class="comment">//TextStyle虽然是一个普通data class，但是它提供了data class那样的copy方法，可以非常高效地构造一个新实例。</span></span><br><span class="line">            <span class="comment">//MaterialTheme.typography.h6是一个预置的TextStyle</span></span><br><span class="line">            style = MaterialTheme.typography.h6.copy(fontStyle = FontStyle.Italic)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/12.png" alt></p>
<p>​        Material Desgin 2的Typography规范，定义了各类文字样式，样式名称也体现了它们的使用场景，比如H1是一级标题，BUTTON是按钮文字等.</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/13.png" alt></p>
<p>​        如果项目采用了Material Design设计规范，那么可以为Text的style参数直接设置Typography中预置的TextStyle。也可以脱离Material Design来定义自己的文本样式。</p>
<p>​        TextStyle中的大部分字段也可以在Text参数中直接设置，例如fonteSize、fontWeight、fontStyle等。注意Text参数会覆盖对TextStyle同名属性的设置。</p>
<h5 id="maxLines参数"><a href="#maxLines参数" class="headerlink" title="maxLines参数"></a>maxLines参数</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">    text = <span class="string">"你好世界，我正在使用Jetpack Compose框架来开发我的APP界面"</span>,</span><br><span class="line">    style = MaterialTheme.typography.body1</span><br><span class="line">)</span><br><span class="line">Text(</span><br><span class="line">    text = <span class="string">"你好世界，我正在使用Jetpack Compose框架来开发我的APP界面"</span>,</span><br><span class="line">    style = MaterialTheme.typography.body1,</span><br><span class="line">    <span class="comment">//maxLines参数可以帮助我们将文本限制在指定的行数之间,当文本超过了参数设置的阈值时，文本会被截断。</span></span><br><span class="line">    maxLines = <span class="number">1</span></span><br><span class="line">)</span><br><span class="line">Text(</span><br><span class="line">    text = <span class="string">"你好世界，我正在使用Jetpack Compose框架来开发我的APP界面"</span>,</span><br><span class="line">    style = MaterialTheme.typography.body1,</span><br><span class="line">    maxLines = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//overflow可以处理文字过多的场景,在Ellipsis模式下会以...结尾</span></span><br><span class="line">    overflow = TextOverflow.Ellipsis</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/14.png" alt></p>
<h4 id="3-fontFamily字体风格"><a href="#3-fontFamily字体风格" class="headerlink" title="3.fontFamily字体风格"></a>3.fontFamily字体风格</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">    text = <span class="string">"Hello world"</span></span><br><span class="line">)</span><br><span class="line">Text(</span><br><span class="line">    text = <span class="string">"Hello world"</span>,</span><br><span class="line">    fontFamily = FontFamily.Monospace</span><br><span class="line">)</span><br><span class="line">Text(</span><br><span class="line">    text = <span class="string">"Hello world"</span>,</span><br><span class="line">    fontFamily = FontFamily.Cursive</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/15.png" alt></p>
<p>​        当使用系统没有的字体时，可以右击res文件夹，选择New-&gt; Android Resource Directory &gt; Resource type &gt; font，创建font文件夹，然后将自己的字体文件拖入文件夹即可。</p>
<h4 id="4-AnnotatedString多样式文字"><a href="#4-AnnotatedString多样式文字" class="headerlink" title="4.AnnotatedString多样式文字"></a>4.AnnotatedString多样式文字</h4><p>​    假如要在一段文字中对局部内容应用特别格式以示突出，比如一个超链接或者一个电话号码等，此时需要用到<strong>AnnotatedString</strong>。AnnotatedString是一个数据类，除了文本值，它还包含了一个SpanStyle和ParagraphStyle的Range列表。SpanStyle用于描述在文本中子串的文字样式，ParagraphStyle则用于描述文本中子串的段落样式，Range确定子串的范围。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/16.png" alt></p>
<p>​        使用<strong>buildAnnotatedString{…}</strong>，以DSL的方式构建一个AnnotatedString。其中<strong>append</strong>用来添加子串的文本，<strong>withStyle</strong>为append的子串指定文字或段落样式：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> annotatedString = buildAnnotatedString &#123;</span><br><span class="line">    withStyle(</span><br><span class="line">        style = SpanStyle(fontSize = <span class="number">24</span>.sp)</span><br><span class="line">    )&#123;</span><br><span class="line">        append(<span class="string">"你现在学习的章节是"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    withStyle(</span><br><span class="line">        style = SpanStyle(</span><br><span class="line">            fontWeight = FontWeight.W900,</span><br><span class="line">            fontSize = <span class="number">24</span>.sp</span><br><span class="line">        )</span><br><span class="line">    )&#123;</span><br><span class="line">        append(<span class="string">"Text"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    append(<span class="string">"\n"</span>)</span><br><span class="line">    withStyle(</span><br><span class="line">        style = ParagraphStyle(lineHeight = <span class="number">25</span>.sp)</span><br><span class="line">    )&#123;</span><br><span class="line">        append(<span class="string">"刚刚我们学会了如何应用文字样式，以及如何限制文本的行数和处理溢出的视觉效果。"</span>)</span><br><span class="line">        append(<span class="string">"\n"</span>)</span><br><span class="line">        append(<span class="string">"现在我们正在学习"</span>)</span><br><span class="line">        withStyle(</span><br><span class="line">            style = SpanStyle(</span><br><span class="line">                fontWeight = FontWeight.W900,</span><br><span class="line">                textDecoration = TextDecoration.Underline,</span><br><span class="line">                color = Color(<span class="number">0xff59A869</span>)</span><br><span class="line">            )</span><br><span class="line">        )&#123;</span><br><span class="line">            append(<span class="string">"AnnotatedString"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Text(text = annotatedString)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/17.png" alt></p>
<p>​        <strong>SpanStyle</strong>继承了TextStyle中关于文字样式相关的字段，而<strong>ParagraphStyle</strong>继承了TextStyle中控制段落的样式，例如textAlign、lineHeight等。某种意义上说<strong>SpanStyle与ParagraphStyle分拆了TextStyle，可以对子串分别进行文字以及段落样式的设置。</strong></p>
<p>SpanStyle或ParagraphStyle中的设置优先于整个TextStyle中的同名属性设置。</p>
<p>​        Compose提供了一种可点击文本组件<strong>ClickedText</strong>，可以响应我们对文字的点击，并返回点击位置。可以让AnnotatdString子串在相应的ClickedText中点击后，做出不同的动作。例如<strong>点击一个超链接样式子串可以打开浏览器、点击数字格式子串来拨打电话等</strong>。<strong>在AnnotatedString中可以为子串添加一个tag标签，在处理onClick事件时，可以根据tag实现不同的逻辑。</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> annotatedText = buildAnnotatedString &#123;</span><br><span class="line">    withStyle(</span><br><span class="line">        style = ParagraphStyle(lineHeight = <span class="number">25</span>.sp)</span><br><span class="line">    )&#123;</span><br><span class="line">        <span class="comment">//为pushStringAnnotation与pop之间的区域添加标签</span></span><br><span class="line">        pushStringAnnotation(tag = <span class="string">"URL"</span>, <span class="keyword">annotation</span> = <span class="string">"https://jetpackcompose.cn/docs/elements/text"</span>)</span><br><span class="line">        withStyle(</span><br><span class="line">            style = SpanStyle(</span><br><span class="line">                fontWeight = FontWeight.W900,</span><br><span class="line">                textDecoration = TextDecoration.Underline,</span><br><span class="line">                color = Color(<span class="number">0xff59A869</span>)</span><br><span class="line">            )</span><br><span class="line">        )&#123;</span><br><span class="line">            append(<span class="string">"AnnotatedString"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//结束之前通过推入操作添加的样式或注释。</span></span><br><span class="line">    <span class="comment">//pop()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ClickableText(</span><br><span class="line">    text = annotatedText,</span><br><span class="line">    onClick = &#123; offset -&gt;</span><br><span class="line">               <span class="comment">//获取被点击区域的标签为URL的annotation并进行处理</span></span><br><span class="line">               annotatedText.getStringAnnotations(</span><br><span class="line">                   tag = <span class="string">"URL"</span>,</span><br><span class="line">                   start = offset,</span><br><span class="line">                   end = offset</span><br><span class="line">               ).firstOrNull()?.let &#123;</span><br><span class="line">                   <span class="comment">//打开URL</span></span><br><span class="line">                   openURL(it.item)</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//打开网页</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">openURL</span><span class="params">(url:<span class="type">String</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> intent= Intent(Intent.ACTION_VIEW, Uri.parse(url))</span><br><span class="line">    APP.appContext.startActivity(intent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-SelectionContainer选中文字"><a href="#5-SelectionContainer选中文字" class="headerlink" title="5.SelectionContainer选中文字"></a>5.SelectionContainer选中文字</h4><p>Text自身默认是不能被长按选择的。Compose提供了专门的<strong>SelectionContainer</strong>组件，对包裹的Text进行选中。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SelectionContainer &#123;</span><br><span class="line">    Text(text = <span class="string">"我是可以被复制的文字"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-TextField输入框"><a href="#6-TextField输入框" class="headerlink" title="6.TextField输入框"></a>6.TextField输入框</h4><p>​        <strong>TextField</strong>组件是我们最常使用的文本输入框，它也遵循着Material Design设计准则。它也有一个低级别的底层组件，叫作<strong>BasicTextField</strong>,TextField有两种风格，一种是默认的，也就是<strong>filled</strong>，另一种是<strong>OutlinedTextField</strong>。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/18.png" alt></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">TextFieldSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//这个text是一个可以变化的文本，用来显示TextField输入框中当前输入的文本内容。</span></span><br><span class="line">    <span class="keyword">var</span> text <span class="keyword">by</span> remember &#123;</span><br><span class="line">        mutableStateOf(<span class="string">""</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    TextField(</span><br><span class="line">        value = text,</span><br><span class="line">        onValueChange = &#123; text = it &#125;,</span><br><span class="line">        label = &#123; Text(text = <span class="string">"用户名"</span>) &#125;<span class="comment">//标签</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/19.png" alt></p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/20.png" alt></p>
<p>​        在onValueChange回调中可以获取来自软键盘的最新输入，利用这个信息来更新可变状态text，驱动界面刷新显示最新的输入文本。来自软键盘的输入内容不会直接更新TextField, TextField<strong>需要通过观察额外的状态更新自身，这也体现了声明式UI中“状态驱动UI”的基本理念</strong>。</p>
<h4 id="7-为输入框添加装饰"><a href="#7-为输入框添加装饰" class="headerlink" title="7.为输入框添加装饰"></a>7.为输入框添加装饰</h4><p>​        输入框都可能带有前后图标或者按钮，例如在注册界面的表单中，密码一栏可能就含有可以隐藏或者显示密码的小按钮。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">TextFieldSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> username <span class="keyword">by</span> remember &#123; mutableStateOf(<span class="string">""</span>) &#125;</span><br><span class="line">    <span class="keyword">var</span> password <span class="keyword">by</span> remember &#123; mutableStateOf(<span class="string">""</span>) &#125;</span><br><span class="line">    Column &#123;</span><br><span class="line">        TextField(</span><br><span class="line">            value = username,</span><br><span class="line">            onValueChange = &#123; username = it &#125;,</span><br><span class="line">            label = &#123; Text(text = <span class="string">"用户名"</span>) &#125;,</span><br><span class="line">            leadingIcon = &#123;</span><br><span class="line">                Icon(</span><br><span class="line">                    imageVector = Icons.Filled.AccountBox, contentDescription = stringResource(id = R.string.app_name)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        TextField(</span><br><span class="line">            value = password,</span><br><span class="line">            onValueChange = &#123; password = it &#125;,</span><br><span class="line">            label = &#123; Text(text = <span class="string">"密码"</span>) &#125;,</span><br><span class="line">            trailingIcon = &#123;</span><br><span class="line">                IconButton(</span><br><span class="line">                    onClick = &#123;  &#125;</span><br><span class="line">                ) &#123;</span><br><span class="line">                    Icon(</span><br><span class="line">                        painter = painterResource(id = R.drawable.image1), contentDescription = stringResource(id = R.string.app_name)</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/21.png" alt></p>
<p>​        在第一个输入框中，通过<strong>leadingIcon</strong>参数为输入框添加了<strong>前置小图标</strong>。小图标由专门的Icon组件来展示,<strong>trailingIcon</strong>可以添加<strong>后置图标</strong>。</p>
<p>​        leadingIcon与trailingIcon都是@Composable(()-&gt; Unit)类型，理论上可以摆放任意Composable组件。例如第二个输入框，在输入框尾部放置了一个IconButton，它除了显示Icon以外，还可以响应用户点击。</p>
<h4 id="8-OutlinedTextField边框样式输入框"><a href="#8-OutlinedTextField边框样式输入框" class="headerlink" title="8.OutlinedTextField边框样式输入框"></a>8.OutlinedTextField边框样式输入框</h4><p>​        OutlinedTextField是按照Material Design规范设计的另一种风格的输入框，除了外观上它带有一个边框，其他用法和TextField基本一致。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">OutLineTextFieldSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text <span class="keyword">by</span> remember &#123; mutableStateOf(<span class="string">""</span>) &#125;</span><br><span class="line">    OutlinedTextField(</span><br><span class="line">        value = text,</span><br><span class="line">        onValueChange = &#123; text = it &#125;,</span><br><span class="line">        label = &#123; Text(text = <span class="string">"用户名"</span>) &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/22.png" alt></p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/23.png" alt></p>
<h4 id="9-BasicTextField基本演示"><a href="#9-BasicTextField基本演示" class="headerlink" title="9.BasicTextField基本演示"></a>9.BasicTextField基本演示</h4><p>​        BasicTextField是一个更低级别的Composable组件，与TextField、OutlinedTextField不同的是，BasicTextField拥有更多的自定义效果。由于TextField没有暴露足够的参数供我们设置，而BasicTextField可以支持大多数的定制需求.</p>
<p>BasicTextField提供了些可选参数：</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/24.png" alt></p>
<p>​        自定义的关键在于最后一个参数<strong>decorationBox</strong>。decorationBox是一个Composable，它回调了一个<strong>innerTextField</strong>函数给我们。innerTextField是框架定义好的东西，它就是文字输入的入口，所以需要创建好一个完整的输入框界面，并在合适的地方调用这个函数。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">BasicTextFieldSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text <span class="keyword">by</span> remember &#123; mutableStateOf(<span class="string">""</span>) &#125;</span><br><span class="line">    BasicTextField(</span><br><span class="line">        value = text,</span><br><span class="line">        onValueChange = &#123;text = it&#125;,</span><br><span class="line">        decorationBox = &#123;innerTextField -&gt;</span><br><span class="line">            Column &#123;</span><br><span class="line">                innerTextField()</span><br><span class="line">                Divider(</span><br><span class="line">                    thickness = <span class="number">2</span>.dp,</span><br><span class="line">                    modifier = Modifier.fillMaxWidth()</span><br><span class="line">                        .background(Color.Black)</span><br><span class="line">                )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/25.png" alt></p>
<h4 id="10-实战：B站风格搜索框"><a href="#10-实战：B站风格搜索框" class="headerlink" title="10.实战：B站风格搜索框"></a>10.实战：B站风格搜索框</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">SearchBar</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> text <span class="keyword">by</span> remember &#123; mutableStateOf(<span class="string">""</span>) &#125;</span><br><span class="line">    Box(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxWidth()</span><br><span class="line">            .height(<span class="number">60</span>.dp)</span><br><span class="line">            .background(Color(<span class="number">0xffd3d3d3</span>)),</span><br><span class="line">        contentAlignment = Alignment.Center <span class="comment">//将Box里面的组件放置于Box容器中央</span></span><br><span class="line">    )&#123;</span><br><span class="line">        BasicTextField(</span><br><span class="line">            value = text,</span><br><span class="line">            onValueChange = &#123;text = it&#125;,</span><br><span class="line">            decorationBox = &#123; innerTextField -&gt;</span><br><span class="line">                Row(</span><br><span class="line">                    verticalAlignment = Alignment.CenterVertically,</span><br><span class="line">                    modifier = Modifier.padding(vertical = <span class="number">2</span>.dp, horizontal = <span class="number">8</span>.dp)</span><br><span class="line">                ) &#123;</span><br><span class="line">                    Icon(</span><br><span class="line">                        imageVector = Icons.Filled.Search,</span><br><span class="line">                        contentDescription = stringResource(id = R.string.app_name),</span><br><span class="line">                    )</span><br><span class="line">                    Box(</span><br><span class="line">                        modifier = Modifier</span><br><span class="line">                            .padding(horizontal = <span class="number">10</span>.dp),</span><br><span class="line">                        <span class="comment">//设置子元素为竖直方向上的中间，水平方向上的最左边</span></span><br><span class="line">                        contentAlignment = Alignment.CenterStart</span><br><span class="line">                    ) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (text.isEmpty())&#123;</span><br><span class="line">                            Text(</span><br><span class="line">                                text = <span class="string">"输入点东西看看吧~"</span>,</span><br><span class="line">                                style = TextStyle(</span><br><span class="line">                                    color = Color(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">128</span>)</span><br><span class="line">                                )</span><br><span class="line">                            )</span><br><span class="line">                        &#125;</span><br><span class="line">                        innerTextField()</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (text.isNotEmpty())&#123;</span><br><span class="line">                        IconButton(</span><br><span class="line">                            onClick = &#123; text = <span class="string">" "</span> &#125;,</span><br><span class="line">                            modifier = Modifier.size(<span class="number">16</span>.dp)</span><br><span class="line">                        ) &#123;</span><br><span class="line">                            Icon(</span><br><span class="line">                                imageVector = Icons.Filled.Close, contentDescription = stringResource(</span><br><span class="line">                                    id = R.string.app_name</span><br><span class="line">                                )</span><br><span class="line">                            )</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .padding(horizontal = <span class="number">10</span>.dp)</span><br><span class="line">                .background(Color.White, CircleShape)</span><br><span class="line">                .height(<span class="number">30</span>.dp)</span><br><span class="line">                .fillMaxWidth()</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/26.png" alt></p>
<h3 id="图片组件"><a href="#图片组件" class="headerlink" title="图片组件"></a>图片组件</h3><h4 id="1-Icon图标"><a href="#1-Icon图标" class="headerlink" title="1.Icon图标"></a>1.Icon图标</h4><p>Icon组件用于显示一系列小图标。Icon组件支持三种不同类型的图片设置：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Icon</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    imageVector: <span class="type">ImageVector</span>, <span class="comment">//矢量图对象，可显示SVG格式的图标</span></span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    tint: <span class="type">Color</span> = LocalContentColor.current.copy(alpha = LocalContentAlpha.current)</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Icon</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    bitmap: <span class="type">ImageBitmap</span>, <span class="comment">//位图对象，可显示JPG、PNG等格式图标</span></span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    tint: <span class="type">Color</span> = LocalContentColor.current.copy(alpha = LocalContentAlpha.current)</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Icon</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    painter: <span class="type">Painter</span>,<span class="comment">//代表一个自定义画笔，可以使用画笔在Canvas上直接绘制图标</span></span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    tint: <span class="type">Color</span> = LocalContentColor.current.copy(alpha = LocalContentAlpha.current)</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>也可以通过res/下的图片资源来设置图标：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Icon(imageVector = ImageVector.vectorResource(id = R.drawable.ic_svg,contentDescription = <span class="string">"矢量图资源"</span>))</span><br><span class="line">Icon(bitmap = ImageBitmap.imageResource(id = R.drawable.ic_png,contentDescription = <span class="string">"图片资源"</span>))</span><br><span class="line">Icon(painter = painterResource(id = R.drawable.ic_both),contentDescription = <span class="string">"任意类型资源"</span>)</span><br></pre></td></tr></table></figure>

<p>​        <strong>ImageVector</strong>和<strong>ImageBitmap</strong>都提供了对应的加载Drawable资源的方法，<strong>vectorResource</strong>用来加载一个<strong>矢量XML</strong>, <strong>imageResource</strong>用来加载<strong>jpg</strong>或者<strong>png</strong>图片。<strong>painterResource</strong>对以上两种类型的Drawable都支持，内部会根据资源创建对应的画笔进行图标的绘制。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">IconSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column &#123;</span><br><span class="line">        <span class="comment">//使用Material包内置的Favorite矢量图标</span></span><br><span class="line">        Icon(imageVector = Icons.Filled.Favorite, contentDescription = <span class="literal">null</span>, tint = Color.Red)</span><br><span class="line">        Icon(imageVector = Icons.Filled.Favorite, contentDescription = <span class="literal">null</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/27.png" alt></p>
<p>​        <strong>contentDescription</strong>参数服务于系统的无障碍功能，其中的文字会转换为语言供视障人士听取内容时使用,默认为空。</p>
<p>​        Material包每个图标都提供了<strong>五种风格</strong>可供使用，除了<strong>Filled</strong>，还包括<strong>Outlined</strong>、<strong>Rounded</strong>、<strong>Sharp</strong>、<strong>Two tone</strong>等，都可以通过Icons.xxx.xxx的方式调用。这五种风格在一些设计上的侧重点不同。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/28.png" alt></p>
<p>​        Material自带的包仅有一些常用的图标，如需使用其他所有的Material图标，可以添加依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation "androidx.compose.material:material-icons-extended:$compose_version"</span><br></pre></td></tr></table></figure>

<h4 id="2-Image图片"><a href="#2-Image图片" class="headerlink" title="2.Image图片"></a>2.Image图片</h4><p>​        Image组件用来显示一张图片。它<strong>和Icon一样也支持三种类型的图片设置</strong>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Image</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    bitmap: <span class="type">ImageBitmap</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    alignment: <span class="type">Alignment</span> = Alignment.Center,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentScale: <span class="type">ContentScale</span> = ContentScale.Fit,</span></span></span><br><span class="line"><span class="function"><span class="params">    alpha: <span class="type">Float</span> = DefaultAlpha,</span></span></span><br><span class="line"><span class="function"><span class="params">    colorFilter: <span class="type">ColorFilter</span>? = <span class="literal">null</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    filterQuality: <span class="type">FilterQuality</span> = DefaultFilterQuality</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Image</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    imageVector: <span class="type">ImageVector</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    alignment: <span class="type">Alignment</span> = Alignment.Center,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentScale: <span class="type">ContentScale</span> = ContentScale.Fit,</span></span></span><br><span class="line"><span class="function"><span class="params">    alpha: <span class="type">Float</span> = DefaultAlpha,</span></span></span><br><span class="line"><span class="function"><span class="params">    colorFilter: <span class="type">ColorFilter</span>? = <span class="literal">null</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Image</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    painter: <span class="type">Painter</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentDescription: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    alignment: <span class="type">Alignment</span> = Alignment.Center,</span></span></span><br><span class="line"><span class="function"><span class="params">    contentScale: <span class="type">ContentScale</span> = ContentScale.Fit,</span></span></span><br><span class="line"><span class="function"><span class="params">    alpha: <span class="type">Float</span> = DefaultAlpha,</span></span></span><br><span class="line"><span class="function"><span class="params">    colorFilter: <span class="type">ColorFilter</span>? = <span class="literal">null</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure>

<p>​        跟Icon组件一样，可以使用<strong>painterResource</strong>来<strong>加载一个本地图片</strong>资源传入painter参数。</p>
<p>​        <strong>contentScale</strong>参数用来指定图片在<strong>Image</strong>组件中的<strong>伸缩样式</strong>，类似传统视图<strong>ImageView</strong>的<strong>scaleType</strong>属性:</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/29.png" alt></p>
<p>​        <strong>colorFilter</strong>参数用来设置一个<strong>ColorFilter</strong>，它可以通过<strong>对绘制的图片的每个像素颜色进行修改</strong>，以实现不同的图片效果。ColorFilter有三种修改方式：<strong>tint</strong>、<strong>colorMatrix</strong>、<strong>lighting</strong>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//tint用BlendMode混合指定颜色。其中参数color将用来混合原图片每个像素的颜色</span></span><br><span class="line"><span class="comment">//参数blendMode是混合模式，blenModel有多种混合模式</span></span><br><span class="line"><span class="comment">//跟传统视图中用的Xfermode的PorterDuff.Model类似</span></span><br><span class="line">ColorFilter.tint(color: Color, blendMode: BlendMode = BlendMode.SrcIn)</span><br><span class="line"></span><br><span class="line"><span class="comment">//colorMatrix通过传入一个RGBA四通道的4x5的数字矩阵去处理颜色变化</span></span><br><span class="line"><span class="comment">//比如可以降低图片饱和读，已到达图片灰化的目的</span></span><br><span class="line">ColorFilter.colorMatrix(colorMatrix: ColorMatrix)</span><br><span class="line"></span><br><span class="line"><span class="comment">//lighting用来为图片应用一个简单的灯光效果</span></span><br><span class="line"><span class="comment">//它由两个参数定义，第一个用于颜色相乘，第二个用于添加到原图颜色</span></span><br><span class="line">ColorFilter.lighting(multiply: Color, add: Color)</span><br></pre></td></tr></table></figure>

<h3 id="按钮组件"><a href="#按钮组件" class="headerlink" title="按钮组件"></a>按钮组件</h3><h4 id="1-Button按钮"><a href="#1-Button按钮" class="headerlink" title="1.Button按钮"></a>1.Button按钮</h4><p>​        Button也是最常用的组件之一，它也是按照Material Design风格来实现的。</p>
<p>Button的参数列表：</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/30.png" alt></p>
<p>​        Button的第一个参数<strong>onClick</strong>是必填项，这是其最重要的功能，通过回调响应用户点击事件。最后一个参数<strong>content</strong>也是一个必填项，也是其最重要的功能之一。Compose的Button默认没有任何UI。仅仅是一个响应onClick的容器，它的<strong>UI需要在content中通过其他组件来实现</strong>。</p>
<p>可以根据需求，在content中实现各种复杂的Button样式。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ButtonSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">   Column &#123;</span><br><span class="line">       Button(</span><br><span class="line">           modifier = Modifier</span><br><span class="line">               .width(<span class="number">100</span>.dp)</span><br><span class="line">               .height(<span class="number">60</span>.dp)</span><br><span class="line">               .padding(<span class="number">3</span>.dp),</span><br><span class="line">           onClick = &#123; &#125;)</span><br><span class="line">       &#123;</span><br><span class="line">           Icon(</span><br><span class="line">               imageVector = Icons.Filled.Done,</span><br><span class="line">               contentDescription = <span class="literal">null</span>,</span><br><span class="line">               modifier = Modifier.size(ButtonDefaults.IconSize)</span><br><span class="line">           )</span><br><span class="line">           Spacer(modifier = Modifier.size(ButtonDefaults.IconSpacing))</span><br><span class="line">           Text(text = <span class="string">"确认"</span>)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/31.png" alt></p>
<p>​        Button有一个参数<strong>interactionSource</strong>,可以监听组件状态的事件源，通过它我们可以根据组件状态设置不同的样式，比如按钮按下时什么效果，正常时什么效果，类似传统视图中的Selector。</p>
<p><strong>interactionSource</strong>通过以下方法获取当前组件状态：</p>
<ul>
<li>interactionSource.<strong>collectIsPressedAsState</strong>()判断<strong>是否按下</strong>状态。</li>
<li>interactionSource.<strong>collectIsFocusedAsState</strong>()判断<strong>是否获取焦点</strong>的状态。</li>
<li>interactionSource.<strong>collectIsDraggedAsState</strong>()判断<strong>是否拖动</strong>。</li>
</ul>
<p>如，通常状态下按钮边框为白色，当处于选中状态时，框线将变为绿色：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> interactionSource = remember&#123;</span><br><span class="line">    MutableInteractionSource()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> pressState = interactionSource.collectIsPressedAsState()</span><br><span class="line"><span class="keyword">val</span> borderColor = <span class="keyword">if</span> (pressState.value) Color.Green <span class="keyword">else</span> Color.White</span><br><span class="line"></span><br><span class="line">Button(</span><br><span class="line">    modifier = Modifier</span><br><span class="line">    .width(<span class="number">100</span>.dp)</span><br><span class="line">    .height(<span class="number">60</span>.dp)</span><br><span class="line">    .padding(<span class="number">3</span>.dp),</span><br><span class="line">    onClick = &#123; &#125;,</span><br><span class="line">    border = BorderStroke(<span class="number">2</span>.dp, color = borderColor),</span><br><span class="line">    interactionSource = interactionSource</span><br><span class="line">)</span><br><span class="line">&#123;</span><br><span class="line">    Icon(</span><br><span class="line">        imageVector = Icons.Filled.Done,</span><br><span class="line">        contentDescription = <span class="literal">null</span>,</span><br><span class="line">        modifier = Modifier.size(ButtonDefaults.IconSize)</span><br><span class="line">    )</span><br><span class="line">    Spacer(modifier = Modifier.size(ButtonDefaults.IconSpacing))</span><br><span class="line">    Text(text = <span class="string">"确认"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/32.png" alt></p>
<p>​        <strong>任何Composable组件都可以通过Modifier.clickable修饰符化身为可点击组件</strong>,而当Button被点击后，需要额外进行一些事件响应处理，比如显示Material Desgin风格的水波纹等，这些都是其内部通过拦截Modifier.clickable事件实现的处理，由于Modifier.clikable已经被内部实现所占用，Button需要提供单独的onClick参数供开发者使用。</p>
<p>​        Button的onClick在底层是通过覆盖Modifier.clickable实现的，所以不要为Button设置Modifier.clickable，即使设置了，也会因为被onClick覆盖而没有任何效果。</p>
<h4 id="2-IconButton图标按钮"><a href="#2-IconButton图标按钮" class="headerlink" title="2.IconButton图标按钮"></a>2.IconButton图标按钮</h4><p>​        IconButton组件实际上只是Button组件的简单封装（<strong>一个可点击的图标</strong>），它一般用于应用栏中的导航或者其他行为。一般来说，我们需要在IconButton组件里提供一个图标组件，这个图标的默认尺寸一般为<strong>24×24dp</strong>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">    Icon(imageVector = Icons.Filled.Favorite, contentDescription = <span class="literal">null</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/33.png" alt></p>
<h4 id="3-FloatingActionButton悬浮按钮"><a href="#3-FloatingActionButton悬浮按钮" class="headerlink" title="3.FloatingActionButton悬浮按钮"></a>3.FloatingActionButton悬浮按钮</h4><p>​        FloatingActionButton悬浮按钮(FAB)一般代表当前页面的主要行为。FAB组件也是需要提供一个Icon组件:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FloatingActionButton(onClick = &#123; &#125;) &#123;</span><br><span class="line">    Icon(imageVector = Icons.Filled.Face, contentDescription = <span class="literal">null</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/34.png" alt></p>
<p>Compose也提供了带有文字扩展的FAB，即<strong>ExtendedFloatingActionButton</strong>组件。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ExtendedFloatingActionButton(</span><br><span class="line">    icon = &#123; Icon(imageVector = Icons.Filled.Favorite, contentDescription = <span class="literal">null</span>)&#125;,</span><br><span class="line">    text = &#123; Text(text = <span class="string">"添加到我喜欢的"</span>) &#125;, </span><br><span class="line">    onClick = &#123;  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/35.png" alt></p>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><h4 id="1-Checkbox复选框"><a href="#1-Checkbox复选框" class="headerlink" title="1.Checkbox复选框"></a>1.Checkbox复选框</h4><p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/36.png" alt></p>
<p><strong>CheckBox</strong>允许用户从一个集合中选择一个或多个项目。复选框可以将一个选项打开或关闭。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Checkbox(</span><br><span class="line">    checked = checkedState.value,</span><br><span class="line">    onCheckedChange = &#123; checkedState.value = it &#125;,</span><br><span class="line">    colors = CheckboxDefaults.colors(</span><br><span class="line">        checkedColor = Color(<span class="number">0xff0079d3</span>)</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/38.png" alt></p>
<h4 id="2-TriStateCheckbox三态选择框"><a href="#2-TriStateCheckbox三态选择框" class="headerlink" title="2.TriStateCheckbox三态选择框"></a>2.TriStateCheckbox三态选择框</h4><p>希望能够统一选择或者取消:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//为两个checkBox定义状态</span></span><br><span class="line"><span class="keyword">val</span> (state,onStateChange) = remember &#123; mutableStateOf(<span class="literal">true</span>) &#125;</span><br><span class="line"><span class="keyword">val</span> (state2,onStateChange2) = remember &#123; mutableStateOf(<span class="literal">true</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据子CheckBox的状态来设置TriStateCheckbox状态</span></span><br><span class="line"><span class="keyword">val</span> parentState = remember(state,state2)&#123;</span><br><span class="line">    <span class="keyword">if</span> (state &amp;&amp; state2) ToggleableState.On</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (! state &amp;&amp; !state2) ToggleableState.Off</span><br><span class="line">    <span class="keyword">else</span> ToggleableState.Indeterminate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//TriStateCheckbox可以为从属的复选框设置状态</span></span><br><span class="line"><span class="keyword">val</span> onParentClick = &#123;</span><br><span class="line">    <span class="keyword">val</span> s = parentState != ToggleableState.On</span><br><span class="line">    onStateChange(s)</span><br><span class="line">    onStateChange2(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TriStateCheckbox(</span><br><span class="line">    state = parentState,</span><br><span class="line">    onClick = onParentClick,</span><br><span class="line">    colors = CheckboxDefaults.colors(</span><br><span class="line">        checkedColor = MaterialTheme.colors.primary</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">Column(</span><br><span class="line">    Modifier.padding(<span class="number">10</span>.dp,<span class="number">0</span>.dp,<span class="number">0</span>.dp,<span class="number">0</span>.dp)</span><br><span class="line">) &#123;</span><br><span class="line">    Checkbox(checked = state, onCheckedChange = onStateChange)</span><br><span class="line">    Checkbox(checked = state2, onCheckedChange = onStateChange2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/39.png" alt></p>
<p>​        在子复选框全选中时，TriCheckBox显示已完成的状态，而如果只有部分复选框选中时，TriCheckBox则显示不确定的状态，当我们在这个时候单击它，则会将剩余没有选中的复选框设置为选中状态。</p>
<h4 id="3-Switch单选开关"><a href="#3-Switch单选开关" class="headerlink" title="3.Switch单选开关"></a>3.Switch单选开关</h4><p>​    <img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/40.png" alt></p>
<p>​    <strong>Switch</strong>组件可以控制单个项目的开启或关闭状态。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> checkState = remember &#123;</span><br><span class="line">    mutableStateOf(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line">Switch(checked = checkState.value, onCheckedChange = &#123; checkState.value = it &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/41.png" alt></p>
<h4 id="4-Slider滑竿组件"><a href="#4-Slider滑竿组件" class="headerlink" title="4.Slider滑竿组件"></a>4.Slider滑竿组件</h4><p><strong>Slider</strong>类似于传统视图的<strong>Seekbar</strong>，可用来做音量、亮度之类的数值调整或者进度条。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/42.png" alt></p>
<p>​        <strong>colors</strong>参数用来设置滑竿各部位的颜色。滑竿组件中可设置颜色的区域很多，例如滑竿小圆球的颜色、滑竿进度颜色、滑竿底色等。<strong>step</strong>参数将进度条平分成<strong>(steps+1)</strong>段。比如当分成2段时，进度条在第一段之间拉动，超过第一段的一半就自动到第一段，没超过就退回到开始位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Composable</span><br><span class="line">fun MySlideDemo()&#123;</span><br><span class="line">    var sliderPosition by remember &#123; mutableStateOf(0f) &#125;</span><br><span class="line">    Text(text &#x3D; &quot;%.1f&quot;.format(sliderPosition * 100) + &quot;%&quot;)</span><br><span class="line">    Slider(value &#x3D; sliderPosition, onValueChange &#x3D; &#123; sliderPosition &#x3D; it &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/43.png" alt></p>
<h3 id="对话框"><a href="#对话框" class="headerlink" title="对话框"></a>对话框</h3><h4 id="1-Dialog对话框"><a href="#1-Dialog对话框" class="headerlink" title="1.Dialog对话框"></a>1.Dialog对话框</h4><p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/44.png" alt></p>
<p>content允许通过传入自己的Composable组件来描述Dialog页面:</p>
<p>如：Dialog宽度不受限制，达到全屏的效果：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">DialogSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column &#123;</span><br><span class="line">        Dialog(onDismissRequest = &#123;  &#125;,</span><br><span class="line">            properties = DialogProperties(</span><br><span class="line">                usePlatformDefaultWidth = <span class="literal">false</span></span><br><span class="line">            )</span><br><span class="line">        ) &#123;</span><br><span class="line">            androidx.compose.material.Surface(</span><br><span class="line">                modifier = Modifier.fillMaxSize(),</span><br><span class="line">                color = Color.Gray</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(text = <span class="string">"你好"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>properties参数定制一些对话框特有的行为：</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/45.png" alt></p>
<p>​        <strong>Compose的对话框不像传统视图的对话框那样通过show()、dismiss()等命令式的方式显隐，它像不同的Composable组件一样，显示与否要看是否在重组中被执行</strong>，所以它的显示与否要依赖状态控制。Dialog和普通Composable组件的不同在于其底层需要依赖独立的Window进行显示。</p>
<p>用状态控制Dialog的显隐：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> openDialog = remember &#123;</span><br><span class="line">    mutableStateOf(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> dialogWidth = <span class="number">200</span>.dp</span><br><span class="line"><span class="keyword">val</span> dialogHeight = <span class="number">50</span>.dp</span><br><span class="line"><span class="keyword">if</span> (openDialog.value)&#123;</span><br><span class="line">    Dialog(onDismissRequest = &#123; openDialog.value = <span class="literal">false</span> &#125;) &#123;</span><br><span class="line">        Box(modifier = Modifier.size(dialogWidth, dialogHeight).background(Color.White))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        在Dialog组件显示过程中，<strong>当点击对话框以外区域时，onDismissRequest会触发执行</strong>，修改openDialog状态为false，触发DialogSample重组，此时判断openDialog为false, Dialog无法被执行，对话框消失。</p>
<h4 id="2-AlertDialog警告对话框"><a href="#2-AlertDialog警告对话框" class="headerlink" title="2.AlertDialog警告对话框"></a>2.AlertDialog警告对话框</h4><p>​        <strong>AlertDialog</strong>组件是Dialog组件的更高级别的封装，同时遵守着Material Design设计标准。<strong>它已经定位好了标题、内容文本、按钮组的位置。</strong>只需要提供相应的组件即可。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">AlertDialogSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> openDialog = remember &#123;</span><br><span class="line">        mutableStateOf(<span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (openDialog.value)&#123;</span><br><span class="line">        AlertDialog(</span><br><span class="line">            onDismissRequest = &#123;  &#125;,</span><br><span class="line">            title = &#123;</span><br><span class="line">            Text(text = <span class="string">"开启位置服务"</span>)&#125;,</span><br><span class="line">            text = &#123;</span><br><span class="line">               Text(text = <span class="string">"这将意味着，我们会给您提供精准的位置服务，并且您将接受关于您订阅的位置信息。"</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            confirmButton = &#123;</span><br><span class="line">                TextButton(onClick = &#123; openDialog.value = <span class="literal">false</span> &#125;) &#123;</span><br><span class="line">                    Text(text = <span class="string">"同意"</span>)</span><br><span class="line">                &#125;            </span><br><span class="line">            &#125;,</span><br><span class="line">            dismissButton = &#123;</span><br><span class="line">                TextButton(onClick = &#123; openDialog.value = <span class="literal">false</span> &#125;) &#123;</span><br><span class="line">                    Text(text = <span class="string">"取消"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/46.png" alt></p>
<h4 id="3-进度条"><a href="#3-进度条" class="headerlink" title="3.进度条"></a>3.进度条</h4><p>​        Compose自带了两种Material Design的进度条，分别是<strong>圆形</strong>和<strong>直线</strong>的进度条，它们都有两种状态，一种是无限加载的，另一种是根据值来动态显示的,</p>
<p>圆形的进度条:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">CircularProgressSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个进度值</span></span><br><span class="line">    <span class="keyword">var</span> progress <span class="keyword">by</span> remember &#123;</span><br><span class="line">        mutableStateOf(<span class="number">0.1f</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个动画，根据progress变量</span></span><br><span class="line">    <span class="keyword">val</span> animatedProgress <span class="keyword">by</span> animateFloatAsState(</span><br><span class="line">        targetValue = progress,</span><br><span class="line">        animationSpec = ProgressIndicatorDefaults.ProgressAnimationSpec</span><br><span class="line">    )</span><br><span class="line">    Column &#123;</span><br><span class="line">        Spacer(modifier = Modifier.requiredHeight(<span class="number">30</span>.dp))</span><br><span class="line">        CircularProgressIndicator(progress = animatedProgress)</span><br><span class="line">        <span class="comment">//圆形进度条指示器</span></span><br><span class="line">        Spacer(modifier = Modifier.requiredHeight(<span class="number">30</span>.dp))</span><br><span class="line">        OutlinedButton(onClick = &#123;</span><br><span class="line">            <span class="keyword">if</span> (progress &lt; <span class="number">1f</span>) progress += <span class="number">0.1f</span></span><br><span class="line">        &#125;) &#123;</span><br><span class="line">            Text(text = <span class="string">"增加进度"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/47.png" alt></p>
<p>​        代码中每次单击按钮，进度就会增加10%。当不设置progress时，就是无限加载的进度条。另外还有直线进度条(<strong>LinearProgressIndicator</strong>)可供选择，使用方法完全一致。</p>
<h2 id="常用的布局组件"><a href="#常用的布局组件" class="headerlink" title="常用的布局组件"></a>常用的布局组件</h2><h3 id="线性布局"><a href="#线性布局" class="headerlink" title="线性布局"></a>线性布局</h3><p>​        线性布局也是Android中最常用的布局方式，对应了传统视图中的LinearLayout,Compose根据orientation的不同又分为<strong>Column</strong>和<strong>Row</strong>。</p>
<h4 id="1-Column"><a href="#1-Column" class="headerlink" title="1.Column"></a>1.Column</h4><p>​        <strong>Column</strong>是一个垂直线性布局组件，它能够将子项按照从上到下的顺序<strong>垂直排列</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">Column</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    modifier: <span class="type">Modifier</span> = Modifier,</span></span></span><br><span class="line"><span class="function"><span class="params">    verticalArrangement: <span class="type">Arrangement</span>.<span class="type">Vertical</span> = Arrangement.Top,</span></span></span><br><span class="line"><span class="function"><span class="params">    horizontalAlignment: <span class="type">Alignment</span>.<span class="type">Horizontal</span> = Alignment.Start,</span></span></span><br><span class="line"><span class="function"><span class="params">    content: @<span class="type">Composable</span> <span class="type">ColumnScope</span>.() -&gt; <span class="type">Unit</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure>

<p>​        <strong>verticalArrangment</strong>和<strong>horizontalAlignment</strong>参数分别可以<strong>安排子项的垂直/水平位置</strong>，在默认的情况下，子项会以垂直方向上靠上(<strong>Arrangment. Top</strong>)，水平方向上靠左(<strong>Alignment. Start</strong>)来布置。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ColumnSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier.border(<span class="number">1</span>.dp, Color.Black),</span><br><span class="line">    ) &#123;</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello Compose"</span>,</span><br><span class="line">            style = MaterialTheme.typography.h6</span><br><span class="line">        )</span><br><span class="line">        Image(painter = painterResource(id = R.drawable.image1), contentDescription = <span class="string">"野比大雄"</span>)</span><br><span class="line">        Text(text = <span class="string">"野比大雄"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/48.png" alt></p>
<p>​        <strong>只有指定了高度或者宽度，才能使用verticalArrangement或horizontalAlignment来定位子项在Column中的位置。</strong>如果高度与宽度都指定了，就可以同时使用以上的两参数来定位子项的水平/垂直位置</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ColumnSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .border(<span class="number">1</span>.dp, Color.Black)</span><br><span class="line">            .size(<span class="number">150</span>.dp),</span><br><span class="line">        verticalArrangement = Arrangement.Center,</span><br><span class="line">        horizontalAlignment = Alignment.CenterHorizontally</span><br><span class="line">    ) &#123;</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello Compose"</span>,</span><br><span class="line">            style = MaterialTheme.typography.h6</span><br><span class="line">        )</span><br><span class="line">        Image(painter = painterResource(id = R.drawable.image1), contentDescription = <span class="string">"野比大雄"</span>)</span><br><span class="line">        Text(text = <span class="string">"野比大雄"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/49.png" alt></p>
<p>在给<strong>Column</strong>定义了大小之后，我们能够使用<strong>Modifier.align</strong>修饰符来<strong>独立设置子项的对齐规则</strong>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ColumnSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Column(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .border(<span class="number">1</span>.dp, Color.Black)</span><br><span class="line">            .size(<span class="number">150</span>.dp),</span><br><span class="line">        verticalArrangement = Arrangement.Center,</span><br><span class="line">    ) &#123;</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"Hello Compose"</span>,</span><br><span class="line">            style = MaterialTheme.typography.h6,</span><br><span class="line">            modifier = Modifier.align(Alignment.CenterHorizontally)</span><br><span class="line">        )</span><br><span class="line">        Image(</span><br><span class="line">            painter = painterResource(id = R.drawable.image1),</span><br><span class="line">            contentDescription = <span class="string">"野比大雄"</span>,</span><br><span class="line">            modifier = Modifier.align(Alignment.CenterHorizontally)</span><br><span class="line">        )</span><br><span class="line">        Text(text = <span class="string">"野比大雄"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/50.png" alt></p>
<p>​        <strong>注：</strong>在对齐效果的影响下，Modifier.align修饰符会优先于Column的horizontalAlignment参数。对于垂直布局中的子项，Modifier.align只能设置自己在水平方向的位置，反之水平布局的子项，只能设置自己在垂直方向的位置。</p>
<h4 id="2-Row"><a href="#2-Row" class="headerlink" title="2.Row"></a>2.Row</h4><p>​        <strong>Row</strong>组件能够将内部子项按照从左到右的方向<strong>水平排列</strong>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ColumnSample2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    androidx.compose.material.Surface(</span><br><span class="line">        shape = RoundedCornerShape(<span class="number">8</span>.dp),</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .padding(horizontal = <span class="number">12</span>.dp) <span class="comment">//设置Surface的外边距</span></span><br><span class="line">            .fillMaxWidth(),</span><br><span class="line">        elevation = <span class="number">10</span>.dp</span><br><span class="line">    ) &#123;</span><br><span class="line">        Column(</span><br><span class="line">            modifier = Modifier.padding(<span class="number">12</span>.dp) <span class="comment">//里面内容的外边距</span></span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(</span><br><span class="line">                text = <span class="string">"Jetpack Compose 是什么？"</span>,</span><br><span class="line">                style = MaterialTheme.typography.h6</span><br><span class="line">            )</span><br><span class="line">            Spacer(modifier = Modifier.padding(vertical = <span class="number">5</span>.dp))</span><br><span class="line">            Text(text = <span class="string">"Jetpack Compose是用于构建原生Android界面的新工具包。"</span> +</span><br><span class="line">                    <span class="string">"它可简化并加快Android上的界面开发，使用更少的代码、强大的工具和直观的Kotlin API，让应用生动而精彩。"</span>)</span><br><span class="line">            Row(</span><br><span class="line">                modifier = Modifier.fillMaxWidth(),</span><br><span class="line">                horizontalArrangement = Arrangement.SpaceBetween</span><br><span class="line">            ) &#123;</span><br><span class="line">                IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                    Image(painter = painterResource(id = R.drawable.image1), contentDescription = <span class="literal">null</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                    Image(painter = painterResource(id = R.drawable.image2), contentDescription = <span class="literal">null</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                    Image(painter = painterResource(id = R.drawable.image4), contentDescription = <span class="literal">null</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​                                                <img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/51.png" alt>        </p>
<p>​        <strong>Row</strong>的<strong>horizontalArrangement</strong>参数帮助我们合理配置了按钮的水平位置。<strong>Arrangment</strong>定义了很多子项位置的对齐方式，除了<strong>Center</strong>（居中）、<strong>Start</strong>（水平靠左）、<strong>End</strong>（水平靠右）等常见的对齐方式，还有一些特定场景下可能用到的对齐方式，例如<strong>Space Between、Space Evenly</strong>等。</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/52.png" alt></p>
<h3 id="帧布局"><a href="#帧布局" class="headerlink" title="帧布局"></a>帧布局</h3><h4 id="1-Box"><a href="#1-Box" class="headerlink" title="1.Box"></a>1.Box</h4><p>​        <strong>Box</strong>组件是一个能够将里面的<strong>子项依次按照顺序堆叠</strong>的布局组件，在使用上类似于传统视图中的<strong>FrameLayout</strong>。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">BoxSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Box(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .size(<span class="number">150</span>.dp)</span><br><span class="line">            .background(Color.Green)</span><br><span class="line">    )</span><br><span class="line">    Box(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .size(<span class="number">80</span>.dp)</span><br><span class="line">            .background(Color.Red)</span><br><span class="line">    )</span><br><span class="line">    Text(</span><br><span class="line">        text = <span class="string">"世界"</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/53.png" alt></p>
<h4 id="2-Surface"><a href="#2-Surface" class="headerlink" title="2.Surface"></a>2.Surface</h4><p>​        <strong>Surface</strong>从字面上来理解，是一个<strong>平面</strong>，在Material Design设计准则中也同样如此，我们可以将很多的组件摆放在这个平面之上，可以设置这个平面的边框、圆角、颜色等。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">SurfaceSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Surface(</span><br><span class="line">        shape = RoundedCornerShape(<span class="number">8</span>.dp),</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .width(<span class="number">300</span>.dp)</span><br><span class="line">            .height(<span class="number">100</span>.dp)</span><br><span class="line">            .padding(<span class="number">6</span>.dp),</span><br><span class="line">        elevation = <span class="number">10</span>.dp,</span><br><span class="line">        ) &#123;</span><br><span class="line">        Row(</span><br><span class="line">            modifier = Modifier.clickable &#123;  &#125;</span><br><span class="line">        ) &#123;</span><br><span class="line">            Image(</span><br><span class="line">                painter = painterResource(id = R.drawable.image1),</span><br><span class="line">                contentDescription = <span class="literal">null</span>,</span><br><span class="line">                modifier = Modifier.size(<span class="number">100</span>.dp),</span><br><span class="line">                contentScale = ContentScale.Crop</span><br><span class="line">            )</span><br><span class="line">            Spacer(modifier = Modifier.padding(horizontal = <span class="number">12</span>.dp))</span><br><span class="line">            Column(</span><br><span class="line">                modifier = Modifier.fillMaxHeight(),</span><br><span class="line">                verticalArrangement = Arrangement.Center</span><br><span class="line">            ) &#123;</span><br><span class="line">                Text(text = <span class="string">"Patient"</span>, style = MaterialTheme.typography.h6)</span><br><span class="line">                Spacer(modifier = Modifier.padding(horizontal = <span class="number">8</span>.dp))</span><br><span class="line">                Text(text = <span class="string">"耐心"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/54.png" alt></p>
<p><strong>Surface与Box之间的区别：</strong></p>
<ul>
<li>如果我们需要<strong>快速设置界面的形状、阴影、边框、颜色等，则用Surface更为合</strong>适，它可以减少Modifier的使用量。</li>
<li>如果只是需要简单地设置界面的背景颜色、大小，且有时候需要简单安排里面布局的位置，则可以使用Box。</li>
</ul>
<h3 id="Spacer留白"><a href="#Spacer留白" class="headerlink" title="Spacer留白"></a>Spacer留白</h3><p>​        让两个组件之间留有空白的间隔，这个时候就可以使用<strong>Spacer</strong>组件。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">SpacerSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Row &#123;</span><br><span class="line">        Box(modifier = Modifier</span><br><span class="line">            .size(<span class="number">100</span>.dp)</span><br><span class="line">            .background(Color.Red))</span><br><span class="line">        Spacer(modifier = Modifier.width(<span class="number">20</span>.dp)) <span class="comment">//也可使用Modifier.padding(horizontal = xx.dp)</span></span><br><span class="line">        Box(modifier = Modifier</span><br><span class="line">            .size(<span class="number">100</span>.dp)</span><br><span class="line">            .background(Color.Magenta))</span><br><span class="line">        Spacer(modifier = Modifier.weight(<span class="number">1f</span>))</span><br><span class="line">        Box(modifier = Modifier.size(<span class="number">100</span>.dp).background(Color.Black))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/55.png" alt></p>
<p>​        其实当Box没有content时，完全可以用Spacer替换。另外，还可以<strong>给Spacer做如下封装，可以更方便地用在水平或垂直布局中。</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">WidthSpacer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    value:<span class="type">Dp</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> = Spacer(modifier = Modifier.width(value))</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">HeightSpacer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    value:<span class="type">Dp</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> = Spacer(modifier = Modifier.height(value))</span><br><span class="line"></span><br><span class="line">Row&#123;</span><br><span class="line">    Button&#123; ... &#125;</span><br><span class="line">    WidthSpacer(value = <span class="number">10</span>.dp)</span><br><span class="line">    Text&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ConstraintLayout约束布局"><a href="#ConstraintLayout约束布局" class="headerlink" title="ConstraintLayout约束布局"></a>ConstraintLayout约束布局</h3><p>​        使用约束布局可以有效降低视图树高度，使视图树扁平化。约束布局在测量布局耗时上，比传统的相对布局具有更好的性能表现，并且约束布局可以根据百分比自适应各种尺寸的终端设备。因为约束布局<strong>ConstraintLayout</strong>十分好用，所以官方为我们迁移到了<strong>Compose</strong>平台。</p>
<p>在build.gradle(app)脚本中添加Compose版本ConstraintLayout对应的依赖项。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation "androidx.constraintlayout:constraintlayout-compose:1.0.1"</span><br></pre></td></tr></table></figure>

<h4 id="1-创建与绑定引用"><a href="#1-创建与绑定引用" class="headerlink" title="1.创建与绑定引用"></a>1.创建与绑定引用</h4><p>​        在<strong>Compose</strong>版本的<strong>ConstraintLayout</strong>中，可以主动<strong>创建引用并绑定至某个具体组件</strong>上，从而实现资源ID相似的功能。每个组件都可以利用其他组件的引用获取到其他组件的摆放位置信息，从而确定自己应摆放的位置。</p>
<p>​        在Compose中有<strong>两种创建引用</strong>的方式：<strong>createRef</strong>()和<strong>createRefs</strong>()。字面意思非常清楚，createRef()每次只会创建一个引用，而createRefs()每次可以创建多个引用（最多16个）。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//createRef()</span></span><br><span class="line"><span class="keyword">val</span> portraitImageRef = remember &#123;</span><br><span class="line">    createRef()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">val</span> usernameTextRef = remember &#123;</span><br><span class="line">    createRef()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//createRefs()</span></span><br><span class="line"><span class="keyword">val</span> (portraitImageRef,usernameTextRef) = remember &#123;</span><br><span class="line">    createRefs()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        接下来可以使用<strong>Modifier.constrainAs()</strong>修饰符将前面创建的引用绑定到某个具体组件上。可以在<strong>constrainAs尾部</strong>Lambda内指定组件的约束信息。<strong>只能在ConstraintLayout尾部的Lambda中使用createRef()、createRefs()创建引用，并使用Modifier.constrainAs()来绑定引用</strong>，这是因为ConstrainScope尾部Lambda的Reciever是一个ConstraintLayoutScope作用域对象。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ConstraintLayoutSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ConstraintLayout(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .width(<span class="number">300</span>.dp)</span><br><span class="line">            .height(<span class="number">100</span>.dp)</span><br><span class="line">            .padding(<span class="number">10</span>.dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="comment">//类似于创建了两个id引用</span></span><br><span class="line">        <span class="keyword">val</span> portraitImageRef = remember &#123;</span><br><span class="line">            createRef()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> portraitImageRef2 = remember &#123;</span><br><span class="line">            createRef()</span><br><span class="line">        &#125;</span><br><span class="line">        Image(</span><br><span class="line">            painter = painterResource(id = R.drawable.image1),</span><br><span class="line">            contentDescription = <span class="literal">null</span>,</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">80</span>.dp)</span><br><span class="line">                .constrainAs(portraitImageRef) &#123;</span><br><span class="line">                    <span class="comment">//居左显示</span></span><br><span class="line">                    top.linkTo(parent.top)</span><br><span class="line">                    bottom.linkTo(parent.bottom)</span><br><span class="line">                    start.linkTo(parent.start)</span><br><span class="line">                &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"野比大雄"</span>,</span><br><span class="line">            fontSize = <span class="number">20</span>.sp,</span><br><span class="line">            modifier = Modifier.constrainAs(portraitImageRef2)&#123;</span><br><span class="line">                <span class="comment">//居中显示</span></span><br><span class="line">                top.linkTo(parent.top)</span><br><span class="line">                bottom.linkTo(parent.bottom)</span><br><span class="line">                end.linkTo(parent.end)</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/56.png" alt></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ConstraintLayoutSample2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ConstraintLayout(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .width(<span class="number">300</span>.dp)</span><br><span class="line">            .height(<span class="number">100</span>.dp)</span><br><span class="line">            .padding(<span class="number">10</span>.dp)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">val</span> (portraitImageRef,usernameTextRef,desTextRef) = remember &#123;</span><br><span class="line">            createRefs()</span><br><span class="line">        &#125;</span><br><span class="line">        Image(</span><br><span class="line">            painter = painterResource(id = R.drawable.image1),</span><br><span class="line">            contentDescription = stringResource(id = R.string.ybdx),</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .size(<span class="number">80</span>.dp)</span><br><span class="line">                .constrainAs(portraitImageRef) &#123;</span><br><span class="line">                    top.linkTo(parent.top)</span><br><span class="line">                    bottom.linkTo(parent.bottom)</span><br><span class="line">                    start.linkTo(parent.start)</span><br><span class="line">                &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"A Compose technophile"</span>,</span><br><span class="line">            fontSize = <span class="number">16</span>.sp,</span><br><span class="line">            maxLines = <span class="number">1</span>,</span><br><span class="line">            textAlign = TextAlign.Left,</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .constrainAs(usernameTextRef)&#123;</span><br><span class="line">                    top.linkTo(portraitImageRef.top)</span><br><span class="line">                    start.linkTo(portraitImageRef.end,<span class="number">10</span>.dp)</span><br><span class="line">                &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"我的个人描述..."</span>,</span><br><span class="line">            fontSize = <span class="number">14</span>.sp,</span><br><span class="line">            color = Color.Gray,</span><br><span class="line">            fontWeight = FontWeight.Light,</span><br><span class="line">            modifier = Modifier.constrainAs(desTextRef)&#123;</span><br><span class="line">                top.linkTo(usernameTextRef.bottom,<span class="number">5</span>.dp)</span><br><span class="line">                start.linkTo(portraitImageRef.end,<span class="number">10</span>.dp)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/57.png" alt></p>
<p>​        也可以在ConstrainScope中为指定组件的宽高信息，在ConstrainScope中直接设置width与height即可，有几个可选值可供使用:</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/58.png" alt></p>
<p>​        当用户名过长时，可以通过设置<strong>end</strong>来指定组件最大所允许的宽度，并将<strong>width</strong>设置为<strong>preferredWrapContent</strong>，这意味着当用户名较短时，实际宽度会随着长度进行自适应调整:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">    text = <span class="string">"A Compose technophile A Compose technophile A Compose technophile "</span>,</span><br><span class="line">    fontSize = <span class="number">16</span>.sp,</span><br><span class="line">    textAlign = TextAlign.Left,</span><br><span class="line">    modifier = Modifier</span><br><span class="line">    .constrainAs(usernameTextRef)&#123;</span><br><span class="line">        top.linkTo(portraitImageRef.top)</span><br><span class="line">        start.linkTo(portraitImageRef.end,<span class="number">10</span>.dp)</span><br><span class="line">        end.linkTo(parent.end,<span class="number">10</span>.dp)</span><br><span class="line">        width = Dimension.preferredWrapContent</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/59.png" alt></p>
<p>​        <strong>Compose</strong>版本的<strong>ConstraintLayout</strong>同样也继承了一些优质特性，例如<strong>Barrier</strong>、<strong>Guideline</strong>、<strong>Chain</strong>等，方便我们完成各种复杂场景的布局需求。</p>
<h4 id="2-Barrier分界线"><a href="#2-Barrier分界线" class="headerlink" title="2.Barrier分界线"></a>2.Barrier分界线</h4><p>​        假如将两个输入框左对齐摆放，且距离文本组件中最长者仍保持10dp的间隔。当用户名、密码等发生变化时，输入框的位置能够自适应调整。在这个需求场景下，就需要使用到Barrier特性，在两个文本结束处添加一条分界线即可：</p>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/60.png" alt></p>
<p>使用createEndBarrier创建一条结尾分界线，此时分界线位置位于两个文本中较长文本的结尾处：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ConstraintLayout(</span><br><span class="line">    modifier = Modifier</span><br><span class="line">    .width(<span class="number">300</span>.dp)</span><br><span class="line">    .height(<span class="number">100</span>.dp)</span><br><span class="line">    .padding(<span class="number">10</span>.dp)</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">val</span> (usernameTextRef,pwdTextRef,usernameInputRef,passwordInputRef,dividerRef) = remember &#123;</span><br><span class="line">        createRefs()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建一条结尾分界线，此时分界线位置位于两个文本中较长文本的结尾处</span></span><br><span class="line">    <span class="keyword">var</span> barrier = createEndBarrier(usernameTextRef,pwdTextRef)</span><br><span class="line">    OutlinedTextField(</span><br><span class="line">        value = <span class="string">""</span>,</span><br><span class="line">        onValueChange = &#123;&#125;,</span><br><span class="line">        modifier = Modifier.constrainAs(usernameInputRef)&#123;</span><br><span class="line">            start.linkTo(barrier,<span class="number">10</span>.dp)</span><br><span class="line">            top.linkTo(usernameTextRef.top)</span><br><span class="line">            bottom.linkTo(usernameTextRef.bottom)</span><br><span class="line">            height = Dimension.fillToConstraints</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-Guideline引导线"><a href="#3-Guideline引导线" class="headerlink" title="3.Guideline引导线"></a>3.Guideline引导线</h4><p>​        Barrier分界线是需要依赖其他引用，从而确定自身位置的。可以使用<strong>Guideline</strong>不依赖任何引用，凭空创建出一条引导线。</p>
<p>​        假设我们希望将用户头像摆放在距离屏幕顶部2∶8的高度位置，头像以上的部分为用户背景，头像以下的部分为用户信息：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">GuidelineSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ConstraintLayout(</span><br><span class="line"></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">val</span> (userPortraitBackgroundRef,userPortraitImageRef,usernameTextRef,pwdTextRef) = remember &#123;</span><br><span class="line">            createRefs()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//首先可以使用createGuidelineFromTop创建从顶部出发的引导线。</span></span><br><span class="line">        <span class="keyword">val</span> guideline = createGuidelineFromTop(<span class="number">0.2f</span>)</span><br><span class="line">        <span class="comment">//接下来的用户背景就可以依赖这条引导线确定宽高了。</span></span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .constrainAs(userPortraitBackgroundRef) &#123;</span><br><span class="line">                    top.linkTo(parent.top)</span><br><span class="line">                    bottom.linkTo(guideline)</span><br><span class="line">                    height = Dimension.fillToConstraints</span><br><span class="line">                    width = Dimension.matchParent</span><br><span class="line">                &#125;</span><br><span class="line">                .background(Color(<span class="number">0xff1e9fff</span>))</span><br><span class="line">        )</span><br><span class="line">        <span class="comment">//摆放头像位置也很简单，仅需将top与bottom连接至引导线。</span></span><br><span class="line">        Image(</span><br><span class="line">            painter = painterResource(id = R.drawable.image1),</span><br><span class="line">            contentDescription = <span class="literal">null</span>,</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .constrainAs(userPortraitImageRef)&#123;</span><br><span class="line">                    top.linkTo(guideline)</span><br><span class="line">                    bottom.linkTo(guideline)</span><br><span class="line">                    start.linkTo(parent.start)</span><br><span class="line">                    end.linkTo(parent.end)</span><br><span class="line">                &#125;</span><br><span class="line">                .size(<span class="number">100</span>.dp)</span><br><span class="line">                .clip(CircleShape)</span><br><span class="line">                .border(width = <span class="number">2</span>.dp, color = Color(<span class="number">0xff5fb878</span>), shape = CircleShape)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/61.png" alt></p>
<h4 id="4-Chain链接约束"><a href="#4-Chain链接约束" class="headerlink" title="4.Chain链接约束"></a>4.Chain链接约束</h4><p>​        <strong>ConstraintLayout</strong>另一个非常好用的特性就是<strong>Chain</strong>链接约束，通过链接约束可以<strong>允许多个组件平均分配布局空间</strong>，这个功能类似于<strong>weight</strong>修饰符。</p>
<p>如：在界面上展示四句诗词：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ConstraintLayout &#123;</span><br><span class="line">    <span class="comment">//首先需要创建四个引用对应这四句诗词</span></span><br><span class="line">    <span class="keyword">val</span> (quotesFirstLineRef,quotesSecondLineRef,quotesThirdLineRef,quotesForthLineRef) = remember &#123;</span><br><span class="line">        createRefs()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//接着创建一条垂直的链接约束将四句诗词连接起来，末尾参数需要传入一个ChainStyle，以表示我们期望链接布局样式</span></span><br><span class="line">    createVerticalChain(</span><br><span class="line">        quotesFirstLineRef,</span><br><span class="line">        quotesSecondLineRef,</span><br><span class="line">        quotesThirdLineRef,</span><br><span class="line">        quotesForthLineRef,</span><br><span class="line">        chainStyle = ChainStyle.Spread</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Compose提供了三种Chain Style:</p>
<ul>
<li><strong>Spread</strong>：链条中每个元素平分整个parent空间。</li>
<li><strong>SpreadInside</strong>：链条中首尾元素紧贴边界，剩下每个元素评分整个parent空间。</li>
<li><strong>Packed</strong>：链条中所有元素聚集到中间。</li>
</ul>
<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/62.png" alt></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">Poetry</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ConstraintLayout &#123;</span><br><span class="line">        <span class="comment">//首先需要创建四个引用对应这四句诗词</span></span><br><span class="line">        <span class="keyword">val</span> (quotesFirstLineRef,quotesSecondLineRef,quotesThirdLineRef,quotesForthLineRef) = remember &#123;</span><br><span class="line">            createRefs()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//接着创建一条垂直的链接约束将四句诗词连接起来，末尾参数需要传入一个ChainStyle，以表示我们期望链接布局样式</span></span><br><span class="line">        createVerticalChain(</span><br><span class="line">            quotesFirstLineRef,</span><br><span class="line">            quotesSecondLineRef,</span><br><span class="line">            quotesThirdLineRef,</span><br><span class="line">            quotesForthLineRef,</span><br><span class="line">            chainStyle = ChainStyle.Spread</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"寄蜉蝣于天地，"</span>,</span><br><span class="line">            color = Color.Black,</span><br><span class="line">            fontSize = <span class="number">30</span>.sp,</span><br><span class="line">            fontWeight = FontWeight.Bold,</span><br><span class="line">            modifier = Modifier.constrainAs(quotesFirstLineRef)&#123;</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">                end.linkTo(parent.end)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"渺沧海之一粟。"</span>,</span><br><span class="line">            color = Color.Black,</span><br><span class="line">            fontSize = <span class="number">30</span>.sp,</span><br><span class="line">            fontWeight = FontWeight.Bold,</span><br><span class="line">            modifier = Modifier.constrainAs(quotesSecondLineRef)&#123;</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">                end.linkTo(parent.end)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"哀吾生之须臾，"</span>,</span><br><span class="line">            color = Color.Black,</span><br><span class="line">            fontSize = <span class="number">30</span>.sp,</span><br><span class="line">            fontWeight = FontWeight.Bold,</span><br><span class="line">            modifier = Modifier.constrainAs(quotesThirdLineRef)&#123;</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">                end.linkTo(parent.end)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        Text(</span><br><span class="line">            text = <span class="string">"羡长江之无穷。"</span>,</span><br><span class="line">            color = Color.Black,</span><br><span class="line">            fontSize = <span class="number">30</span>.sp,</span><br><span class="line">            fontWeight = FontWeight.Bold,</span><br><span class="line">            modifier = Modifier.constrainAs(quotesForthLineRef)&#123;</span><br><span class="line">                start.linkTo(parent.start)</span><br><span class="line">                end.linkTo(parent.end)</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/63.png" alt></p>
<h3 id="Scaffold脚手架"><a href="#Scaffold脚手架" class="headerlink" title="Scaffold脚手架"></a>Scaffold脚手架</h3><p>​        <strong>Scaffold</strong>组件实现了<strong>Material Design的布局结构</strong>，通过配合其他Material组件可以轻松地构建Material Design风格的界面。</p>
<p>一个带有<strong>TopAppBar</strong>的Scaffold例子:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ScaffoldSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Scaffold(</span><br><span class="line">        topBar = &#123;</span><br><span class="line">            TopAppBar(</span><br><span class="line">                title = &#123;</span><br><span class="line">                    Text(text = <span class="string">"主页"</span>)</span><br><span class="line">                &#125;,</span><br><span class="line">                navigationIcon = &#123;</span><br><span class="line">                    IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                        Icon(imageVector = Icons.Filled.Menu, contentDescription = <span class="literal">null</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    ) &#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier.fillMaxSize(),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(text = <span class="string">"主页界面"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/64.png" alt></p>
<p>在Scaffold组件中添加一个<strong>底部导航栏(BottomNavigation)</strong>:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ScaffoldSample1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> selectedItem <span class="keyword">by</span> remember &#123;</span><br><span class="line">        mutableStateOf(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> items = listOf&lt;Item&gt;(</span><br><span class="line">        Item(<span class="string">"主页"</span>,Icons.Filled.Home),</span><br><span class="line">        Item(<span class="string">"列表"</span>,Icons.Filled.List),</span><br><span class="line">        Item(<span class="string">"设置"</span>,Icons.Filled.Settings)</span><br><span class="line">    )</span><br><span class="line">    Scaffold(</span><br><span class="line">        topBar = &#123;</span><br><span class="line">            TopAppBar(</span><br><span class="line">                title = &#123;</span><br><span class="line">                    Text(text = <span class="string">"主页"</span>)</span><br><span class="line">                &#125;,</span><br><span class="line">                navigationIcon = &#123;</span><br><span class="line">                    IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                        Icon(imageVector = Icons.Filled.Menu, contentDescription = <span class="literal">null</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;,</span><br><span class="line">        bottomBar = &#123;</span><br><span class="line">            BottomNavigation &#123;</span><br><span class="line">                items.forEachIndexed &#123; index, item -&gt;</span><br><span class="line">                    BottomNavigationItem(</span><br><span class="line">                        selected = selectedItem == index,</span><br><span class="line">                        onClick = &#123; selectedItem = index &#125;,</span><br><span class="line">                        icon = &#123; Icon(imageVector = item.imageVector, contentDescription = <span class="literal">null</span> )&#125;,</span><br><span class="line">                        alwaysShowLabel = <span class="literal">false</span>,</span><br><span class="line">                        label = &#123; Text(text = item.name) &#125;</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ) &#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier.fillMaxSize(),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(text = <span class="string">"主页界面"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/65.png" alt></p>
<p>​        <strong>BottomNavigation</strong>组件创造了底部导航栏的总体布局，比如高度等，这些都是按照Material Design风格设计的，要修改整体的颜色，可以在BottomNavigation的其他参数中修改。BottomNavigationItem组件则创建了具体的导航图标以及标签，在BottomNavigationItem组件中可以设置一些其他参数，例如选中/未选中时的图标颜色。设置<strong>alwaysShowLabel=false</strong>，也就是只有当前的页面才显示标签文字。</p>
<p>​        通过Scaffold组件创建一个<strong>侧边栏</strong>很简单，Scaffold有一个<strong>drawerContent</strong>参数，只需要传递一个自定义的Composable的<strong>content</strong>即可：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ScaffoldSample1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> selectedItem <span class="keyword">by</span> remember &#123;</span><br><span class="line">        mutableStateOf(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> items = listOf&lt;Item&gt;(</span><br><span class="line">        Item(<span class="string">"主页"</span>,Icons.Filled.Home),</span><br><span class="line">        Item(<span class="string">"列表"</span>,Icons.Filled.List),</span><br><span class="line">        Item(<span class="string">"设置"</span>,Icons.Filled.Settings)</span><br><span class="line">    )</span><br><span class="line">    Scaffold(</span><br><span class="line">        <span class="comment">//标题导航栏</span></span><br><span class="line">        topBar = &#123;</span><br><span class="line">            TopAppBar(</span><br><span class="line">                title = &#123;</span><br><span class="line">                    Text(text = <span class="string">"主页"</span>)</span><br><span class="line">                &#125;,</span><br><span class="line">                navigationIcon = &#123;</span><br><span class="line">                    IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                        Icon(imageVector = Icons.Filled.Menu, contentDescription = <span class="literal">null</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//底部导航栏</span></span><br><span class="line">        bottomBar = &#123;</span><br><span class="line">            BottomNavigation &#123;</span><br><span class="line">                items.forEachIndexed &#123; index, item -&gt;</span><br><span class="line">                    BottomNavigationItem(</span><br><span class="line">                        selected = selectedItem == index,</span><br><span class="line">                        onClick = &#123; selectedItem = index &#125;,</span><br><span class="line">                        icon = &#123; Icon(imageVector = item.imageVector, contentDescription = <span class="literal">null</span> )&#125;,</span><br><span class="line">                        alwaysShowLabel = <span class="literal">false</span>,</span><br><span class="line">                        label = &#123; Text(text = item.name) &#125;</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//侧边栏</span></span><br><span class="line">        drawerContent = &#123;</span><br><span class="line">            Text(text = <span class="string">"Hello"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    ) &#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier.fillMaxSize(),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(text = <span class="string">"主页界面"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/66.png" alt></p>
<p>​        此时如果按下了系统返回键，应用会直接退出。我们希望此时只是关闭侧边栏。Compose提供了用于拦截系统返回键的组件<strong>BackHandler</strong>。此外，通过<strong>ScaffoldState</strong>可以监听侧边栏是否已打开。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ScaffoldSample1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> selectedItem <span class="keyword">by</span> remember &#123;</span><br><span class="line">        mutableStateOf(<span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> items = listOf&lt;Item&gt;(</span><br><span class="line">        Item(<span class="string">"主页"</span>,Icons.Filled.Home),</span><br><span class="line">        Item(<span class="string">"列表"</span>,Icons.Filled.List),</span><br><span class="line">        Item(<span class="string">"设置"</span>,Icons.Filled.Settings)</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//通过ScaffoldState可以监听侧边栏是否已打开</span></span><br><span class="line">    <span class="comment">//通过rememberScaffoldState()获取包含侧边栏状态的ScaffoldState</span></span><br><span class="line">    <span class="keyword">val</span> scaffoldState = rememberScaffoldState()</span><br><span class="line">    <span class="keyword">val</span> scope = rememberCoroutineScope()</span><br><span class="line">    Scaffold(</span><br><span class="line">        <span class="comment">//标题导航栏</span></span><br><span class="line">        topBar = &#123;</span><br><span class="line">            TopAppBar(</span><br><span class="line">                title = &#123;</span><br><span class="line">                    Text(text = <span class="string">"主页"</span>)</span><br><span class="line">                &#125;,</span><br><span class="line">                navigationIcon = &#123;</span><br><span class="line">                    IconButton(onClick = &#123;  &#125;) &#123;</span><br><span class="line">                        Icon(imageVector = Icons.Filled.Menu, contentDescription = <span class="literal">null</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//底部导航栏</span></span><br><span class="line">        bottomBar = &#123;</span><br><span class="line">            BottomNavigation &#123;</span><br><span class="line">                items.forEachIndexed &#123; index, item -&gt;</span><br><span class="line">                    BottomNavigationItem(</span><br><span class="line">                        selected = selectedItem == index,</span><br><span class="line">                        onClick = &#123; selectedItem = index &#125;,</span><br><span class="line">                        icon = &#123; Icon(imageVector = item.imageVector, contentDescription = <span class="literal">null</span> )&#125;,</span><br><span class="line">                        alwaysShowLabel = <span class="literal">false</span>,</span><br><span class="line">                        label = &#123; Text(text = item.name) &#125;</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//侧边栏</span></span><br><span class="line">        drawerContent = &#123;</span><br><span class="line">            Text(text = <span class="string">"Hello"</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        scaffoldState = scaffoldState</span><br><span class="line"></span><br><span class="line">    ) &#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier.fillMaxSize(),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(text = <span class="string">"主页界面"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//拦截系统返回键的组件BackHandler</span></span><br><span class="line">    BackHandler(</span><br><span class="line">        <span class="comment">//当侧边栏被打开时，scaffoldState.drawerState.isOpen被更新为true，</span></span><br><span class="line">        <span class="comment">// 此时，BackHandler开始监听系统返回键事件，返回键被按下则会通过scaffoldState来关闭侧边栏。</span></span><br><span class="line">        enabled = scaffoldState.drawerState.isOpen</span><br><span class="line">    ) &#123;</span><br><span class="line">        scope.launch &#123;</span><br><span class="line">            <span class="comment">//通过rememberCoroutineScope()创建了一个协程作用域,因为close()是一个挂起函数</span></span><br><span class="line">            scaffoldState.drawerState.close()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>​        很多产品中都有展示组数据的需求场景，如果数据数量是可以枚举的，则仅需通过Column组件来枚举列出：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">MenuSample</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    options:<span class="type">List</span>&lt;<span class="type">Options</span>&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">    expanded:<span class="type">Boolean</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    onDismissRequest:()-&gt;<span class="type">Unit</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">    DropdownMenu(expanded = expanded, onDismissRequest = onDismissRequest) &#123;</span><br><span class="line">        Column &#123;</span><br><span class="line">            options.forEach&#123; option -&gt;</span><br><span class="line">                ListItem(text = &#123; Text(text = option.text)&#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        可以通过给<strong>Column</strong>的<strong>Modifier</strong>添加<strong>verticalScroll()</strong>方法来让列表实现滑动。</p>
<h3 id="LazyComposables"><a href="#LazyComposables" class="headerlink" title="LazyComposables"></a>LazyComposables</h3><p>​        如果列表过长，众多的内容会占用大量的内存。然而更多的内容对于用户其实都是不可见的，没必要加载到内存。所以Compose提供了专门用于<strong>处理长列表</strong>的组件，这些组件只会在能看到的列表部分进行重组和布局，它们分别是<strong>LazyColumn</strong>和<strong>LazyRow</strong>。其作用类似于传统视图中的<strong>ListView</strong>或者<strong>RecyclerView</strong>。</p>
<h3 id="LazyListScope作用域"><a href="#LazyListScope作用域" class="headerlink" title="LazyListScope作用域"></a>LazyListScope作用域</h3><p>​         <strong>LazyColumn</strong>和<strong>LazyRow</strong>内部都是基于<strong>LazyList</strong>组件实现的，虽然这是一个internal的内部组件，我们无法直接使用它。LazyList和其他布局类组件不同，不能在它的content里面直接裸写子Composable组件。它的content是一个<strong>LazyListScope.()-&gt; Unit</strong>类型的作用域代码块，在内部<strong>通过LazyListScope提供的item等方法来描述列表中的内容</strong>，整体符合DSL的代码风格:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">MenuSample</span><span class="params">()</span></span>&#123;</span><br><span class="line">   LazyColumn &#123;</span><br><span class="line">       <span class="comment">//在lazyColumn中添加一个Text</span></span><br><span class="line">       item &#123; </span><br><span class="line">           Text(text = <span class="string">"第一项内容"</span>)</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//在第一个text之后添加五个text</span></span><br><span class="line">       items(<span class="number">5</span>)&#123;index -&gt;</span><br><span class="line">           Text(text = <span class="string">"第<span class="subst">$&#123;index + <span class="number">2</span>&#125;</span>项内容"</span>)</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//添加另一个Text</span></span><br><span class="line">       item &#123; </span><br><span class="line">           Text(text = <span class="string">"最后一项"</span>)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/67.png" alt></p>
<p>​        除了<strong>item</strong>和<strong>items(Int)</strong>,<strong>LazyListScope</strong>还提供了<strong>items(List&lt; T&gt; )</strong>以及<strong>itemsIndexed(List&lt; T&gt; )</strong>扩展函数，允许直接传入一个List对象。比如像下面这样创建一个菜单: </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">MenuSample</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    options:<span class="type">List</span>&lt;<span class="type">Options</span>&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">    expanded:<span class="type">Boolean</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    onDismissRequest:()-&gt;<span class="type">Unit</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>&#123;</span><br><span class="line">    DropdownMenu(expanded = expanded, onDismissRequest = onDismissRequest) &#123;</span><br><span class="line">        LazyColumn &#123;</span><br><span class="line">            items(options)&#123; option -&gt; </span><br><span class="line">                ListItem(text = &#123; Text&#123; option.text &#125; &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="内容填充"><a href="#内容填充" class="headerlink" title="内容填充"></a>内容填充</h3><p>​        有的时候也需要<strong>在列表中为内容设置外边距</strong>，这也非常容易,Lazy组件提供了<strong>contentPadding</strong>参数。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">MenuSample2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    LazyColumn(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxSize()</span><br><span class="line">            .background(Color.Gray),</span><br><span class="line">        contentPadding = PaddingValues(<span class="number">35</span>.dp)</span><br><span class="line">    )&#123;</span><br><span class="line">        items(<span class="number">50</span>)&#123; index -&gt;</span><br><span class="line">            ContentCard(index = index)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">ContentCard</span><span class="params">(index:<span class="type">Int</span>)</span></span>&#123;</span><br><span class="line">    Card(</span><br><span class="line">        elevation = <span class="number">8</span>.dp,</span><br><span class="line">        modifier = Modifier.fillMaxWidth()</span><br><span class="line">    ) &#123;</span><br><span class="line">        Box(</span><br><span class="line">            modifier = Modifier</span><br><span class="line">                .fillMaxSize()</span><br><span class="line">                .padding(<span class="number">15</span>.dp),</span><br><span class="line">            contentAlignment = Alignment.Center</span><br><span class="line">        ) &#123;</span><br><span class="line">            Text(</span><br><span class="line">                text = <span class="string">"我是序号第<span class="subst">$&#123;index&#125;</span>位的卡片"</span>,</span><br><span class="line">                style = MaterialTheme.typography.h5</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/68.png" alt></p>
<p>​        还能通过<strong>Arrangement</strong>来<strong>设置Lazy组件中每个项目之间的间隔</strong>(水平/竖直):</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Composable</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">MenuSample2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    LazyColumn(</span><br><span class="line">        modifier = Modifier</span><br><span class="line">            .fillMaxSize()</span><br><span class="line">            .background(Color.Gray),</span><br><span class="line">        contentPadding = PaddingValues(<span class="number">35</span>.dp),</span><br><span class="line">        verticalArrangement = Arrangement.spacedBy(<span class="number">10</span>.dp)</span><br><span class="line">    )&#123;</span><br><span class="line">        items(<span class="number">50</span>)&#123; index -&gt;</span><br><span class="line">            ContentCard(index = index)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/12/29/%E5%B8%B8%E7%94%A8UI%E7%BB%84%E4%BB%B6/69.png" alt></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Compose/" rel="tag"># Compose</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/12/28/%E5%88%9D%E8%AF%86Compose/" rel="prev" title="初识Compose">
      <i class="fa fa-chevron-left"></i> 初识Compose
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/12/29/Android%E6%8E%A7%E4%BB%B6%E8%AF%A6%E8%A7%A3/" rel="next" title="Android控件详解">
      Android控件详解 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Modifier修饰符"><span class="nav-number">1.</span> <span class="nav-text">Modifier修饰符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常用修饰符"><span class="nav-number">1.1.</span> <span class="nav-text">常用修饰符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Modifier-size"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.Modifier.size</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Modifier-background"><span class="nav-number">1.1.2.</span> <span class="nav-text">2.Modifier.background</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Modifier-fillMaxSize"><span class="nav-number">1.1.3.</span> <span class="nav-text">3.Modifier.fillMaxSize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Modifier-border-amp-Modifier-padding"><span class="nav-number">1.1.4.</span> <span class="nav-text">4.Modifier.border &amp; Modifier.padding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Modifier-offset"><span class="nav-number">1.1.5.</span> <span class="nav-text">5.Modifier.offset</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域限定Modifier修饰符"><span class="nav-number">1.2.</span> <span class="nav-text">作用域限定Modifier修饰符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-matchParentSize"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.matchParentSize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-weight"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.weight</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Modifier实现原理"><span class="nav-number">1.3.</span> <span class="nav-text">Modifier实现原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-接口实现"><span class="nav-number">1.3.1.</span> <span class="nav-text">1.接口实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-链的构建"><span class="nav-number">1.3.2.</span> <span class="nav-text">2.链的构建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-链的解析"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.链的解析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用的基础组件"><span class="nav-number">2.</span> <span class="nav-text">常用的基础组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文字组件"><span class="nav-number">2.1.</span> <span class="nav-text">文字组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Text文本"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.Text文本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-style文字样式"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.style文字样式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#maxLines参数"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">maxLines参数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-fontFamily字体风格"><span class="nav-number">2.1.3.</span> <span class="nav-text">3.fontFamily字体风格</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-AnnotatedString多样式文字"><span class="nav-number">2.1.4.</span> <span class="nav-text">4.AnnotatedString多样式文字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-SelectionContainer选中文字"><span class="nav-number">2.1.5.</span> <span class="nav-text">5.SelectionContainer选中文字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-TextField输入框"><span class="nav-number">2.1.6.</span> <span class="nav-text">6.TextField输入框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-为输入框添加装饰"><span class="nav-number">2.1.7.</span> <span class="nav-text">7.为输入框添加装饰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-OutlinedTextField边框样式输入框"><span class="nav-number">2.1.8.</span> <span class="nav-text">8.OutlinedTextField边框样式输入框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-BasicTextField基本演示"><span class="nav-number">2.1.9.</span> <span class="nav-text">9.BasicTextField基本演示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-实战：B站风格搜索框"><span class="nav-number">2.1.10.</span> <span class="nav-text">10.实战：B站风格搜索框</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图片组件"><span class="nav-number">2.2.</span> <span class="nav-text">图片组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Icon图标"><span class="nav-number">2.2.1.</span> <span class="nav-text">1.Icon图标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Image图片"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.Image图片</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#按钮组件"><span class="nav-number">2.3.</span> <span class="nav-text">按钮组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Button按钮"><span class="nav-number">2.3.1.</span> <span class="nav-text">1.Button按钮</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-IconButton图标按钮"><span class="nav-number">2.3.2.</span> <span class="nav-text">2.IconButton图标按钮</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-FloatingActionButton悬浮按钮"><span class="nav-number">2.3.3.</span> <span class="nav-text">3.FloatingActionButton悬浮按钮</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择器"><span class="nav-number">2.4.</span> <span class="nav-text">选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Checkbox复选框"><span class="nav-number">2.4.1.</span> <span class="nav-text">1.Checkbox复选框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-TriStateCheckbox三态选择框"><span class="nav-number">2.4.2.</span> <span class="nav-text">2.TriStateCheckbox三态选择框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Switch单选开关"><span class="nav-number">2.4.3.</span> <span class="nav-text">3.Switch单选开关</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Slider滑竿组件"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.Slider滑竿组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对话框"><span class="nav-number">2.5.</span> <span class="nav-text">对话框</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Dialog对话框"><span class="nav-number">2.5.1.</span> <span class="nav-text">1.Dialog对话框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-AlertDialog警告对话框"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.AlertDialog警告对话框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-进度条"><span class="nav-number">2.5.3.</span> <span class="nav-text">3.进度条</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用的布局组件"><span class="nav-number">3.</span> <span class="nav-text">常用的布局组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#线性布局"><span class="nav-number">3.1.</span> <span class="nav-text">线性布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Column"><span class="nav-number">3.1.1.</span> <span class="nav-text">1.Column</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Row"><span class="nav-number">3.1.2.</span> <span class="nav-text">2.Row</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#帧布局"><span class="nav-number">3.2.</span> <span class="nav-text">帧布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Box"><span class="nav-number">3.2.1.</span> <span class="nav-text">1.Box</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Surface"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.Surface</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spacer留白"><span class="nav-number">3.3.</span> <span class="nav-text">Spacer留白</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ConstraintLayout约束布局"><span class="nav-number">3.4.</span> <span class="nav-text">ConstraintLayout约束布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-创建与绑定引用"><span class="nav-number">3.4.1.</span> <span class="nav-text">1.创建与绑定引用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Barrier分界线"><span class="nav-number">3.4.2.</span> <span class="nav-text">2.Barrier分界线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Guideline引导线"><span class="nav-number">3.4.3.</span> <span class="nav-text">3.Guideline引导线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Chain链接约束"><span class="nav-number">3.4.4.</span> <span class="nav-text">4.Chain链接约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scaffold脚手架"><span class="nav-number">3.5.</span> <span class="nav-text">Scaffold脚手架</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表"><span class="nav-number">4.</span> <span class="nav-text">列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LazyComposables"><span class="nav-number">4.1.</span> <span class="nav-text">LazyComposables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LazyListScope作用域"><span class="nav-number">4.2.</span> <span class="nav-text">LazyListScope作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内容填充"><span class="nav-number">4.3.</span> <span class="nav-text">内容填充</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="余一"
      src="/images/avatar5.jpg">
  <p class="site-author-name" itemprop="name">余一</p>
  <div class="site-description" itemprop="description">纸上得来终觉浅，绝知此事要躬行。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">172</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.bilibili.com/" title="https:&#x2F;&#x2F;www.bilibili.com&#x2F;" rel="noopener" target="_blank">Bilibili</a>
        </li>
    </ul>
  </div>

	
           
         
         <div style="">
  <canvas id="canvas" style="width:60%;">��ǰ�������֧��canvas������������������</canvas>
</div>
<script>
(function(){

   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //����canvas�Ŀ���
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //�洢ʱ������
    var data = [];
    //�洢�˶���С��
    var balls = [];
    //�������Ӱ뾶
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //�洢ʱ�����֣���ʮλСʱ����λСʱ��ð�š�ʮλ���ӡ���λ���ӡ�ð�š�ʮλ���ӡ���λ������7���������
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*���ɵ�������*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*����ʱ��*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //ʱ�䷢���仯
            if(NewData[i] !== data[i]){
                //���仯������ֵ����data�����е������洢��changeNumArray������
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //����С��
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*����С��״̬*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*����Ҫ�˶���С��*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*��Ⱦ*/
    function render(){
        //���û������ȣ��ﵽ��ջ�����Ч��
        canvas.height = 100;
        //��Ⱦʱ��
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //��ȾС��
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //����ʱ��
        updateDigitTime();
        //����С��״̬
        updateBalls();
        //��Ⱦ
        render();
    },50);
}

})();
</script>
      </div>
	
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">余一</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">1.5m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">22:38</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

  <script async src="/js/cursor/fireworks.js"></script>

</body>
</html>
